{"version":3,"sources":["../../../../../../apps/web/components/builder-canvas.tsx","../../../../../../apps/web/components/builder-code-view.tsx","../../../../../../apps/web/components/builder-sidebar.tsx","../../../../../../apps/web/components/builder/builder-header.tsx","../../../../../../apps/web/components/builder/drag-overlay.tsx","../../../../../../apps/web/components/builder/instructions-banner.tsx","../../../../../../apps/web/components/builder/load-project-dialog.tsx","../../../../../../apps/web/components/builder/page-tabs.tsx","../../../../../../apps/web/components/builder/text-editing-banner.tsx","../../../../../../apps/web/app/builder/page.tsx","../../../../../../apps/web/lib/merge-imports.ts","../../../../../../apps/web/lib/builder-utils.ts","../../../../../../node_modules/lucide-react/src/icons/pen-line.ts"],"sourcesContent":["\"use client\";\n\nimport type { BuilderComponent } from \"@uitripled/shared/builder\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  useSortable,\n  verticalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { X } from \"lucide-react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\ntype CanvasComponentProps = {\n  component: BuilderComponent;\n  onDelete: (id: string) => void;\n  isTextEditing: boolean;\n  onRegisterTextNode: (\n    componentId: string,\n    nodeId: string,\n    originalText: string\n  ) => void;\n  onUpdateTextNode: (\n    componentId: string,\n    nodeId: string,\n    newValue: string\n  ) => void;\n};\n\nfunction CanvasComponent({\n  component,\n  onDelete,\n  isTextEditing,\n  onRegisterTextNode,\n  onUpdateTextNode,\n}: CanvasComponentProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n    isOver,\n  } = useSortable({\n    id: component.id,\n    disabled: isTextEditing,\n  });\n\n  const contentRef = useRef<HTMLDivElement | null>(null);\n\n  const handleTextChange = useCallback(\n    (event: Event) => {\n      const target = event.target as HTMLElement | null;\n      if (!target) return;\n      const textId = target.dataset.builderTextId;\n      if (!textId) return;\n\n      const newValue = target.textContent ?? \"\";\n      onUpdateTextNode(component.id, textId, newValue);\n    },\n    [component.id, onUpdateTextNode]\n  );\n\n  useEffect(() => {\n    const container = contentRef.current;\n    if (!container) return;\n\n    const selector =\n      \"h1,h2,h3,h4,h5,h6,p,span,button,a,li,blockquote,figcaption,label,strong,em,small,div\";\n    const allElements = Array.from(\n      container.querySelectorAll<HTMLElement>(selector)\n    );\n\n    const editableElements = allElements.filter((el) => {\n      const text = el.textContent?.trim();\n      if (!text) {\n        return false;\n      }\n\n      const hasChildWithText = Array.from(\n        el.querySelectorAll<HTMLElement>(selector)\n      ).some((child) => {\n        if (child === el) return false;\n        const childText = child.textContent?.trim();\n        return !!childText;\n      });\n\n      if (hasChildWithText) {\n        return false;\n      }\n\n      return true;\n    });\n\n    editableElements.forEach((el, index) => {\n      const textId = `${component.id}-${index}`;\n      el.dataset.builderTextId = textId;\n      onRegisterTextNode(component.id, textId, el.textContent ?? \"\");\n\n      const storedValue = component.textContent?.[textId]?.value;\n      if (storedValue !== undefined && storedValue !== el.textContent) {\n        el.textContent = storedValue;\n      }\n      el.removeEventListener(\"input\", handleTextChange);\n      el.removeEventListener(\"blur\", handleTextChange);\n\n      if (isTextEditing) {\n        el.setAttribute(\"contenteditable\", \"true\");\n        el.setAttribute(\"spellcheck\", \"false\");\n        el.style.outline = \"1px dashed var(--primary)\";\n        el.style.outlineOffset = \"2px\";\n        el.style.cursor = \"text\";\n        el.addEventListener(\"input\", handleTextChange);\n        el.addEventListener(\"blur\", handleTextChange);\n      } else {\n        el.removeAttribute(\"contenteditable\");\n        el.removeAttribute(\"spellcheck\");\n        el.style.outline = \"\";\n        el.style.outlineOffset = \"\";\n        el.style.cursor = \"\";\n      }\n    });\n\n    return () => {\n      editableElements.forEach((el) => {\n        el.removeEventListener(\"input\", handleTextChange);\n        el.removeEventListener(\"blur\", handleTextChange);\n      });\n    };\n  }, [\n    component.id,\n    component.textContent,\n    handleTextChange,\n    isTextEditing,\n    onRegisterTextNode,\n  ]);\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  };\n\n  const Component = component.animation.component;\n\n  return (\n    <motion.div\n      ref={setNodeRef}\n      style={style}\n      {...attributes}\n      {...(!isTextEditing ? listeners : {})}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      className={`group relative mb-4 rounded-lg border-2 border-dashed bg-card/50 p-4 transition-all ${\n        isOver && !isDragging\n          ? \"border-primary border-solid bg-primary/10\"\n          : isDragging\n            ? \"border-border opacity-50\"\n            : \"border-border hover:border-primary\"\n      } ${isTextEditing ? \"cursor-text\" : \"\"}`}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n    >\n      {/* Delete Button */}\n      <AnimatePresence>\n        {isHovered && (\n          <motion.button\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.8 }}\n            onClick={(e) => {\n              e.stopPropagation();\n              onDelete(component.id);\n            }}\n            className=\"absolute -right-2 -top-2 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-lg transition-colors hover:bg-destructive/90\"\n          >\n            <X className=\"h-4 w-4\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n\n      {/* Component Label */}\n      <div className=\"mb-2 flex items-center justify-between\">\n        <span className=\"text-xs font-medium text-muted-foreground\">\n          {component.animation.name}\n        </span>\n      </div>\n\n      {/* Rendered Component */}\n      <div\n        ref={contentRef}\n        className=\"relative w-full overflow-hidden rounded-lg bg-background\"\n      >\n        <div className=\"w-full overflow-x-auto\">\n          <div className=\"min-w-full\">\n            <Component />\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\ntype BuilderCanvasProps = {\n  components: BuilderComponent[];\n  onDelete: (id: string) => void;\n  isTextEditing: boolean;\n  onRegisterTextNode: (\n    componentId: string,\n    nodeId: string,\n    originalText: string\n  ) => void;\n  onUpdateTextNode: (\n    componentId: string,\n    nodeId: string,\n    newValue: string\n  ) => void;\n};\n\nexport function BuilderCanvas({\n  components,\n  onDelete,\n  isTextEditing,\n  onRegisterTextNode,\n  onUpdateTextNode,\n}: BuilderCanvasProps) {\n  const { setNodeRef, isOver } = useDroppable({\n    id: \"builder-canvas\",\n  });\n\n  const componentIds = components.map((c) => c.id);\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={`min-h-full rounded-lg border-2 border-dashed p-4 md:p-6 transition-colors ${\n        isOver ? \"border-primary bg-primary/5\" : \"border-border bg-muted/30\"\n      }`}\n    >\n      {components.length === 0 ? (\n        <div className=\"flex h-full min-h-[400px] flex-col items-center justify-center text-center\">\n          <div className=\"mb-4 text-muted-foreground\">\n            <svg\n              className=\"mx-auto h-16 w-16\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={1.5}\n                d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n              />\n            </svg>\n          </div>\n          <h3 className=\"mb-2 text-lg font-semibold\">Empty Canvas</h3>\n          <p className=\"max-w-md text-sm text-muted-foreground\">\n            Drag components from the sidebar to start building your page.\n            Components will be automatically responsive.\n          </p>\n        </div>\n      ) : (\n        <SortableContext\n          items={componentIds}\n          strategy={verticalListSortingStrategy}\n        >\n          <AnimatePresence mode=\"popLayout\">\n            {components.map((component) => (\n              <CanvasComponent\n                key={component.id}\n                component={component}\n                onDelete={onDelete}\n                isTextEditing={isTextEditing}\n                onRegisterTextNode={onRegisterTextNode}\n                onUpdateTextNode={onUpdateTextNode}\n              />\n            ))}\n          </AnimatePresence>\n        </SortableContext>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@uitripled/ui/components/ui/dialog\";\nimport { Input } from \"@uitripled/ui/components/ui/input\";\nimport { Label } from \"@uitripled/ui/components/ui/label\";\nimport { mergeComponentImports } from \"@/lib/merge-imports\";\nimport type { BuilderComponent, BuilderProjectPage } from \"@uitripled/shared/builder\";\nimport { motion } from \"framer-motion\";\nimport {\n  Check,\n  ChevronDown,\n  ChevronUp,\n  Copy,\n  Download,\n  Eye,\n  Loader2,\n  Save,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { CodeBlock } from \"./code-block\";\nimport { useUILibrary } from \"@uitripled/ui/components/ui-library-provider\";\n\ntype BuilderCodeViewProps = {\n  pages: BuilderProjectPage[];\n  activePageId: string | null;\n};\n\nconst escapeForJSXText = (value: string) =>\n  value.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n\nconst replaceNextOccurrence = (\n  source: string,\n  search: string,\n  replacement: string\n) => {\n  if (!search) return source;\n  const index = source.indexOf(search);\n  if (index === -1) return source;\n  return `${source.slice(0, index)}${replacement}${source.slice(index + search.length)}`;\n};\n\nconst applyTextOverrides = (\n  code: string,\n  textContent?: BuilderComponent[\"textContent\"]\n) => {\n  if (!textContent) return code;\n\n  const entries = Object.entries(textContent)\n    .map(([key, content]) => {\n      const parts = key.split(\"-\");\n      const index = Number(parts[parts.length - 1]);\n\n      return {\n        content,\n        index: Number.isNaN(index) ? 0 : index,\n      };\n    })\n    .sort((a, b) => a.index - b.index);\n\n  return entries.reduce((acc, { content: { original, value } }) => {\n    if (!original) return acc;\n    if (value === undefined || value === original) return acc;\n\n    return replaceNextOccurrence(acc, original, escapeForJSXText(value));\n  }, code);\n};\n\nconst escapeForTemplateLiteral = (value: string) =>\n  value.replace(/\\\\/g, \"\\\\\").replace(/`/g, \"\\`\").replace(/\\$/g, \"\\$\");\n\ntype PageArtifact = {\n  id: string;\n  name: string;\n  slug: string;\n  code: string;\n  componentCount: number;\n};\n\nconst slugifyName = (value: string) =>\n  value\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\")\n    .slice(0, 48);\n\nconst buildPageCode = async (\n  currentPage: BuilderProjectPage,\n  allPages: BuilderProjectPage[],\n  selectedLibrary: string = \"shadcnui\"\n): Promise<string> => {\n  const components = currentPage.components;\n\n  const componentUsages: string[] = [];\n  const allImports: string[] = [];\n  const componentDefinitions: string[] = [];\n\n  for (const component of components) {\n    let animationCode = component.animation.code;\n\n    // If code is not available, fetch it from the API\n    if (!animationCode && component.animation.id) {\n      try {\n        // Try library-specific variant first (e.g., detail-task-card-shadcnui)\n        const libraryId = `${component.animation.id}-${selectedLibrary}`;\n        let response = await fetch(`/api/registry/${libraryId}`);\n\n        // Fallback to base ID if library-specific variant doesn't exist\n        if (!response.ok) {\n          response = await fetch(`/api/registry/${component.animation.id}`);\n        }\n\n        if (response.ok) {\n          const data = await response.json();\n          // The API returns files array with content property\n          animationCode = data.files?.[0]?.content || data.code;\n        } else {\n          console.warn(\n            `Failed to load code for component ${component.animation.id}: ${response.status}`\n          );\n          continue;\n        }\n      } catch (error) {\n        console.error(\n          `Error loading code for component ${component.animation.id}:`,\n          error\n        );\n        continue;\n      }\n    }\n\n    if (!animationCode) {\n      console.warn(`Component ${component.animation.id} has no code available`);\n      continue;\n    }\n    const codeWithOverrides = applyTextOverrides(\n      animationCode,\n      component.textContent\n    );\n\n    const functionMatch = codeWithOverrides.match(\n      /export\\s+(?:function|const)\\s+(\\w+)/\n    );\n    const componentFunctionName = functionMatch\n      ? functionMatch[1]\n      : component.animation.name.replace(/\\s+/g, \"\");\n\n    componentUsages.push(`        {/* ${component.animation.name} */}\n        <section>\n          <${componentFunctionName} />\n        </section>`);\n\n    const lines = codeWithOverrides.split(\"\\n\");\n\n    const componentLines: string[] = [];\n    let inImportSection = true;\n    let inMultilineImport = false;\n    let multilineImportBuffer: string[] = [];\n\n    for (const line of lines) {\n      const trimmedLine = line.trim();\n\n      if (/^(['\"])use client\\1;?\\s*(\\/\\/.*)?$/.test(trimmedLine)) {\n        continue;\n      }\n\n      if (inImportSection) {\n        if (inMultilineImport) {\n          multilineImportBuffer.push(line);\n          if (trimmedLine.includes(\"}\") && trimmedLine.includes(\"from\")) {\n            allImports.push(multilineImportBuffer.join(\"\\n\"));\n            multilineImportBuffer = [];\n            inMultilineImport = false;\n          }\n          continue;\n        }\n\n        if (trimmedLine.startsWith(\"import \")) {\n          if (\n            trimmedLine.match(/^import\\s*{/) &&\n            !trimmedLine.includes(\"from\")\n          ) {\n            inMultilineImport = true;\n            multilineImportBuffer.push(line);\n          } else {\n            allImports.push(line);\n          }\n          continue;\n        } else if (trimmedLine === \"\" || trimmedLine.startsWith(\"//\")) {\n          continue;\n        } else {\n          inImportSection = false;\n        }\n      }\n\n      if (!inImportSection) {\n        if (/^(['\"])use client\\1;?\\s*(\\/\\/.*)?$/.test(trimmedLine)) {\n          continue;\n        }\n        componentLines.push(line);\n      }\n    }\n\n    const componentCode = componentLines\n      .join(\"\\n\")\n      .replace(/^export\\s+(?:function|const)\\s+/m, \"function \")\n      .trim();\n\n    if (componentCode.length > 0) {\n      componentDefinitions.push(\n        `// ${component.animation.name}\\n${componentCode}`\n      );\n    }\n  }\n\n  const mainContent =\n    componentUsages.length > 0\n      ? componentUsages.join(\"\\n\\n\")\n      : `        <div className=\"rounded-lg border border-dashed border-border/60 p-12 text-center text-muted-foreground\">\n          Add blocks from the builder sidebar to populate this page.\n        </div>`;\n\n  const importsCode =\n    allImports.length > 0\n      ? `'use client'\\n\\n${allImports.join(\"\\n\")}`\n      : `'use client'`;\n\n  const pageTemplate = `\n\n${componentDefinitions.join(componentDefinitions.length > 0 ? \"\\n\\n\" : \"\")}\n\nexport default function Page() {\n  return (\n    <div className=\"container mx-auto px-4 py-12 md:px-6 lg:px-8\">\n      <div className=\"mx-auto max-w-6xl space-y-12\">\n${mainContent}\n      </div>\n    </div>\n  )\n}\n`;\n\n  const mergedImports = mergeComponentImports(importsCode);\n\n  return mergedImports + pageTemplate;\n};\n\nconst buildProjectLayout = (\n  allPages: BuilderProjectPage[],\n  projectName: string\n): string => {\n  const brandTitle = allPages[0]?.name ?? projectName;\n  const brandLabel = escapeForTemplateLiteral(brandTitle);\n  const navLinks = allPages.map((page, index) => ({\n    href: index === 0 ? \"/\" : `/${page.slug}`,\n    label: escapeForTemplateLiteral(page.name),\n  }));\n  const currentYear = new Date().getFullYear();\n\n  const navMarkup =\n    navLinks.length > 0\n      ? navLinks\n          .map(\n            (link) => `            <Link\n              href=\"${link.href}\"\n              className=\"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${link.label}\n            </Link>`\n          )\n          .join(\"\\n\")\n      : `            <Link\n              href=\"/\"\n              className=\"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${brandLabel}\n            </Link>`;\n\n  const footerMarkup =\n    navLinks.length > 0\n      ? navLinks\n          .map(\n            (link) => `            <Link\n              href=\"${link.href}\"\n              className=\"text-xs text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${link.label}\n            </Link>`\n          )\n          .join(\"\\n\")\n      : `            <Link\n              href=\"/\"\n              className=\"text-xs text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${brandLabel}\n            </Link>`;\n\n  return `import './globals.css'\nimport type { Metadata } from 'next'\nimport type { ReactNode } from 'react'\nimport Link from 'next/link'\n\nexport const metadata: Metadata = {\n  title: '${brandLabel} - Generated Experience',\n  description: 'Generated with the UI Motion Builder',\n}\n\nexport default function RootLayout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\" className=\"scroll-smooth\">\n      <body className=\"flex min-h-screen flex-col bg-background text-foreground antialiased\">\n        <header className=\"border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n          <div className=\"container mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8\">\n            <Link href=\"/\" className=\"text-base font-semibold tracking-tight\">\n              ${brandLabel}\n            </Link>\n            <nav className=\"flex items-center gap-6\">\n${navMarkup}\n            </nav>\n          </div>\n        </header>\n        <main className=\"flex-1\">\n          {children}\n        </main>\n        <footer className=\"border-t border-border bg-muted/40\">\n          <div className=\"container mx-auto flex flex-col gap-2 px-4 py-6 text-xs text-muted-foreground md:flex-row md:items-center md:justify-between md:px-6 lg:px-8\">\n            <span>&copy; ${currentYear} ${brandLabel}. All rights reserved.</span>\n            <nav className=\"flex flex-wrap items-center gap-4\">\n${footerMarkup}\n            </nav>\n          </div>\n        </footer>\n      </body>\n    </html>\n  )\n}\n`;\n};\n\nexport function BuilderCodeView({ pages, activePageId }: BuilderCodeViewProps) {\n  const [copied, setCopied] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [saveDialogOpen, setSaveDialogOpen] = useState(false);\n  const [projectName, setProjectName] = useState(\"\");\n  const [saved, setSaved] = useState(false);\n  const [pendingAction, setPendingAction] = useState<\n    \"preview\" | \"deploy\" | null\n  >(null);\n  const [exporting, setExporting] = useState(false);\n  const [exported, setExported] = useState(false);\n  const [pageArtifacts, setPageArtifacts] = useState<PageArtifact[]>([]);\n  const [loadingCode, setLoadingCode] = useState(false);\n  const router = useRouter();\n  const { selectedLibrary } = useUILibrary();\n\n  const totalComponentCount = useMemo(\n    () => pages.reduce((sum, page) => sum + page.components.length, 0),\n    [pages]\n  );\n\n  // Load code for all pages asynchronously\n  useEffect(() => {\n    let cancelled = false;\n\n    async function loadPageCodes() {\n      setLoadingCode(true);\n      try {\n        const artifacts = await Promise.all(\n          pages.map(async (page) => ({\n            id: page.id,\n            name: page.name,\n            slug: page.slug,\n            code: await buildPageCode(page, pages, selectedLibrary),\n            componentCount: page.components.length,\n          }))\n        );\n\n        if (!cancelled) {\n          setPageArtifacts(artifacts);\n        }\n      } catch (error) {\n        console.error(\"Failed to load page codes:\", error);\n        if (!cancelled) {\n          setPageArtifacts([]);\n        }\n      } finally {\n        if (!cancelled) {\n          setLoadingCode(false);\n        }\n      }\n    }\n\n    loadPageCodes();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [pages, selectedLibrary]);\n\n  const pageCodeMap = useMemo(() => {\n    const map: Record<string, string> = {};\n    pageArtifacts.forEach((artifact) => {\n      map[artifact.id] = artifact.code;\n    });\n    return map;\n  }, [pageArtifacts]);\n\n  const activeArtifact = useMemo(() => {\n    if (pageArtifacts.length === 0) {\n      return null;\n    }\n\n    if (activePageId) {\n      const match = pageArtifacts.find(\n        (artifact) => artifact.id === activePageId\n      );\n      if (match) {\n        return match;\n      }\n    }\n\n    return pageArtifacts[0];\n  }, [pageArtifacts, activePageId]);\n\n  const projectSignature = useMemo(\n    () =>\n      JSON.stringify(\n        pages.map((page) => ({\n          components: page.components.map((component) => ({\n            animationId: component.animationId,\n            textContent: component.textContent ?? {},\n          })),\n        }))\n      ),\n    [pages]\n  );\n\n  const handleCopy = async () => {\n    if (!activeArtifact) return;\n\n    await navigator.clipboard.writeText(activeArtifact.code);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const handleSave = useCallback(async () => {\n    const normalizedName = projectName.trim();\n    if (!normalizedName || totalComponentCount === 0) return;\n\n    const existingProjects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    const existingNormalizedEntry = existingProjects[normalizedName];\n\n    let finalProjectName = normalizedName;\n    if (!existingNormalizedEntry) {\n      const chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n      const baseSlug = normalizedName\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, \"-\")\n        .replace(/^-+|-+$/g, \"\")\n        .slice(0, 40);\n\n      const uniqueId =\n        typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\"\n          ? crypto.randomUUID().replace(/-/g, \"\").slice(0, 8)\n          : Array.from({ length: 8 }, () =>\n              chars.charAt(Math.floor(Math.random() * chars.length))\n            ).join(\"\");\n\n      finalProjectName = baseSlug\n        ? `${baseSlug}-${uniqueId}`\n        : `project-${uniqueId}`;\n    }\n\n    const previousProjectData =\n      existingProjects[finalProjectName] || existingNormalizedEntry || null;\n\n    if (existingNormalizedEntry && normalizedName !== finalProjectName) {\n      delete existingProjects[normalizedName];\n    }\n\n    // Ensure all page codes are loaded before saving\n    const serializedPages = await Promise.all(\n      pages.map(async (page) => ({\n        id: page.id,\n        name: page.name,\n        slug: page.slug,\n        components: page.components.map((component) => ({\n          id: component.id,\n          animationId: component.animationId,\n          textContent: component.textContent ?? {},\n        })),\n        code: pageCodeMap[page.id] || (await buildPageCode(page, pages, selectedLibrary)),\n      }))\n    );\n\n    const fallbackPage: BuilderProjectPage = {\n      id: \"page-fallback\",\n      name: \"Home\",\n      slug: \"home\",\n      components: [],\n    };\n    const fallbackCode = await buildPageCode(fallbackPage, [fallbackPage], selectedLibrary);\n\n    // Generate a short unique ID (5 characters) for the project if it doesn't exist\n    const generateShortId = () => {\n      // Use crypto for better randomness if available\n      if (\n        typeof crypto !== \"undefined\" &&\n        typeof crypto.getRandomValues === \"function\"\n      ) {\n        const array = new Uint8Array(4);\n        crypto.getRandomValues(array);\n        return Array.from(array, (byte) => byte.toString(36).padStart(2, \"0\"))\n          .join(\"\")\n          .slice(0, 5);\n      }\n      // Fallback: timestamp + random\n      return (\n        Date.now().toString(36) + Math.random().toString(36).slice(2)\n      ).slice(-5);\n    };\n\n    const projectUuid = previousProjectData?.uuid ?? generateShortId();\n\n    // Use short ID as deployment slug to ensure consistency\n    const deploymentSlug = previousProjectData?.deploymentSlug ?? projectUuid;\n\n    const projectData = {\n      name: finalProjectName,\n      uuid: projectUuid,\n      deploymentSlug: deploymentSlug,\n      pages: serializedPages,\n      entryPageId: serializedPages[0]?.id ?? null,\n      components: serializedPages[0]?.components ?? [],\n      code: serializedPages[0]?.code ?? fallbackCode,\n      savedAt: new Date().toISOString(),\n      deploymentId: previousProjectData?.deploymentId ?? deploymentSlug,\n      deploymentUrl: previousProjectData?.deploymentUrl,\n    };\n\n    existingProjects[finalProjectName] = projectData;\n    localStorage.setItem(\"builderProjects\", JSON.stringify(existingProjects));\n\n    setSaved(true);\n    setTimeout(() => setSaved(false), 2000);\n    setSaveDialogOpen(false);\n\n    const action = pendingAction;\n    setPendingAction(null);\n\n    if (action === \"preview\") {\n      router.push(`/preview/${encodeURIComponent(finalProjectName)}`);\n    } else if (action === \"deploy\") {\n      router.push(`/deploy?project=${encodeURIComponent(finalProjectName)}`);\n    }\n\n    setProjectName(\"\");\n  }, [\n    pageCodeMap,\n    pages,\n    pendingAction,\n    projectName,\n    router,\n    totalComponentCount,\n  ]);\n\n  const findMatchingProject = useCallback(() => {\n    const existingProjects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    return Object.values(existingProjects).find((project: any) => {\n      const savedPages =\n        Array.isArray(project.pages) && project.pages.length > 0\n          ? project.pages\n          : [\n              {\n                components: project.components ?? [],\n              },\n            ];\n\n      const signature = JSON.stringify(\n        savedPages.map((page: any) => ({\n          components: (page.components ?? []).map((component: any) => ({\n            animationId: component.animationId,\n            textContent: component.textContent ?? {},\n          })),\n        }))\n      );\n\n      return signature === projectSignature;\n    }) as { name: string } | undefined;\n  }, [projectSignature]);\n\n  const handlePreview = () => {\n    if (totalComponentCount === 0) return;\n\n    const existingProject = findMatchingProject();\n\n    if (existingProject) {\n      router.push(`/preview/${encodeURIComponent(existingProject.name)}`);\n    } else {\n      openSaveDialog(\"preview\");\n    }\n  };\n\n  const handleDeploy = () => {\n    if (totalComponentCount === 0) return;\n\n    const existingProject = findMatchingProject();\n\n    if (existingProject) {\n      router.push(\n        `/deploy?project=${encodeURIComponent(existingProject.name)}`\n      );\n    } else {\n      openSaveDialog(\"deploy\");\n    }\n  };\n\n  const handleExportProject = useCallback(async () => {\n    if (totalComponentCount === 0 || exporting) return;\n\n    setExporting(true);\n    setExported(false);\n\n    try {\n      const matchingProject = findMatchingProject();\n      const fallbackName = pages[0]?.name?.trim() ?? \"builder-project\";\n      const projectNameForExport = matchingProject?.name?.trim().length\n        ? matchingProject.name\n        : fallbackName.length > 0\n          ? fallbackName\n          : \"builder-project\";\n\n      const pageFiles = pageArtifacts.map((artifact, index) => {\n        const sanitizedSlug =\n          artifact.slug && artifact.slug.length > 0\n            ? artifact.slug\n            : slugifyName(artifact.name) || `page-${index + 1}`;\n\n        const path =\n          index === 0 ? \"app/page.tsx\" : `app/${sanitizedSlug}/page.tsx`;\n\n        return {\n          path,\n          code: artifact.code,\n        };\n      });\n\n      // Generate custom layout with nav/footer\n      const layoutCode = buildProjectLayout(pages, projectNameForExport);\n\n      const response = await fetch(\"/api/export\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          projectName: projectNameForExport,\n          pages: pageFiles,\n          layout: layoutCode,\n        }),\n      });\n\n      if (!response.ok) {\n        let errorMessage = `Export failed with status ${response.status}`;\n        try {\n          const errorBody = await response.json();\n          if (typeof errorBody?.error === \"string\") {\n            errorMessage = errorBody.error;\n          }\n        } catch {\n          // ignore parsing errors\n        }\n        throw new Error(errorMessage);\n      }\n\n      const blob = await response.blob();\n      const downloadUrl = URL.createObjectURL(blob);\n      const filenameBase =\n        slugifyName(projectNameForExport) || \"builder-project\";\n\n      const link = document.createElement(\"a\");\n      link.href = downloadUrl;\n      link.download = `${filenameBase}.zip`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      setTimeout(() => {\n        URL.revokeObjectURL(downloadUrl);\n      }, 1000);\n\n      setExported(true);\n      setTimeout(() => setExported(false), 2000);\n    } catch (error) {\n      console.error(\"Failed to export project zip\", error);\n      window.alert(\"Failed to export project. Please try again.\");\n    } finally {\n      setExporting(false);\n    }\n  }, [\n    exporting,\n    findMatchingProject,\n    pageArtifacts,\n    pages,\n    totalComponentCount,\n  ]);\n\n  const saveButtonLabel =\n    pendingAction === \"preview\"\n      ? \"Save & Preview\"\n      : pendingAction === \"deploy\"\n        ? \"Save & Deploy\"\n        : \"Save Project\";\n\n  const encodedProjectName = projectName\n    ? encodeURIComponent(projectName)\n    : \"project-name\";\n\n  const openSaveDialog = (action: \"preview\" | \"deploy\" | null = null) => {\n    const existingProject = findMatchingProject();\n\n    if (existingProject) {\n      setProjectName(existingProject.name);\n    } else if (!projectName.trim()) {\n      const timestamp = new Date().toISOString().split(\"T\")[0];\n      setProjectName(`project-${timestamp}`);\n    }\n\n    setPendingAction(action);\n    setSaveDialogOpen(true);\n  };\n\n  const [displayedCode, setDisplayedCode] = useState<string>(\"\");\n\n  useEffect(() => {\n    async function loadDisplayedCode() {\n      if (activeArtifact) {\n        setDisplayedCode(activeArtifact.code);\n      } else {\n        const fallbackPage: BuilderProjectPage = {\n          id: \"page-preview-fallback\",\n          name: \"Home\",\n          slug: \"home\",\n          components: [],\n        };\n        const code = await buildPageCode(fallbackPage, [fallbackPage], selectedLibrary);\n        setDisplayedCode(code);\n      }\n    }\n\n    loadDisplayedCode();\n  }, [activeArtifact, selectedLibrary]);\n\n  return (\n    <>\n      <motion.div\n        initial={false}\n        animate={{ height: isExpanded ? \"auto\" : \"60px\" }}\n        className=\"border-t border-border bg-card\"\n      >\n        <div className=\"grid grid-cols-1 space-y-5 md:flex items-center justify-between border-b border-border px-6 py-3\">\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <h3 className=\"font-semibold\">Generated Code</h3>\n            <span className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\">\n              {pages.length} {pages.length === 1 ? \"page\" : \"pages\"}\n            </span>\n            <span className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\">\n              {totalComponentCount}{\" \"}\n              {totalComponentCount === 1 ? \"component\" : \"components\"}\n            </span>\n            {activeArtifact && (\n              <span className=\"text-xs text-muted-foreground\">\n                Showing: {activeArtifact.name}\n              </span>\n            )}\n          </div>\n          <div className=\"grid grid-cols-2 md:flex items-center gap-2\">\n            <button\n              onClick={() => openSaveDialog()}\n              disabled={totalComponentCount === 0}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {saved ? (\n                <>\n                  <Check className=\"h-4 w-4\" />\n                  Saved!\n                </>\n              ) : (\n                <>\n                  <Save className=\"h-4 w-4\" />\n                  Save\n                </>\n              )}\n            </button>\n            <button\n              onClick={handlePreview}\n              disabled={totalComponentCount === 0}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              <Eye className=\"h-4 w-4\" />\n              Preview\n            </button>\n            {/* <button\n              onClick={handleDeploy}\n              disabled={totalComponentCount === 0}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              <Rocket className=\"h-4 w-4\" />\n              Deploy\n            </button> */}\n            <button\n              onClick={handleExportProject}\n              disabled={totalComponentCount === 0 || exporting}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {exporting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  Exporting...\n                </>\n              ) : exported ? (\n                <>\n                  <Check className=\"h-4 w-4\" />\n                  Exported!\n                </>\n              ) : (\n                <>\n                  <Download className=\"h-4 w-4\" />\n                  Export\n                </>\n              )}\n            </button>\n            <button\n              onClick={handleCopy}\n              disabled={!activeArtifact}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {copied ? (\n                <>\n                  <Check className=\"h-4 w-4\" />\n                  Copied!\n                </>\n              ) : (\n                <>\n                  <Copy className=\"h-4 w-4\" />\n                  Copy\n                </>\n              )}\n            </button>\n            <button\n              onClick={() => setIsExpanded(!isExpanded)}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent\"\n            >\n              {isExpanded ? (\n                <>\n                  <ChevronDown className=\"h-4 w-4\" />\n                  Collapse\n                </>\n              ) : (\n                <>\n                  <ChevronUp className=\"h-4 w-4\" />\n                  Expand\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"max-h-[500px] overflow-auto\"\n          >\n            {loadingCode || !displayedCode ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"flex flex-col items-center gap-3\">\n                  <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Generating code...\n                  </p>\n                </div>\n              </div>\n            ) : (\n              <CodeBlock code={displayedCode} language=\"tsx\" />\n            )}\n          </motion.div>\n        )}\n      </motion.div>\n\n      <Dialog\n        open={saveDialogOpen}\n        onOpenChange={(open: boolean) => {\n          setSaveDialogOpen(open);\n          if (!open) {\n            setPendingAction(null);\n          }\n        }}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Save Project</DialogTitle>\n            <DialogDescription>\n              Enter a name for your project. A unique 5-character ID will be\n              added automatically to prevent conflicts.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"rounded-md border border-amber-200 bg-amber-50 p-3 text-sm text-amber-900 dark:border-amber-900/50 dark:bg-amber-950/30 dark:text-amber-200\">\n            <p className=\"font-medium\">\n              ⚠️ Projects are saved in browser localStorage\n            </p>\n            <p className=\"mt-1 text-xs opacity-90\">\n              Your projects will be lost if you clear browser data, use\n              incognito mode, or switch browsers. Export your code before\n              clearing cookies.\n            </p>\n          </div>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"project-name\">Project Name</Label>\n              <Input\n                id=\"project-name\"\n                placeholder=\"my-awesome-project\"\n                value={projectName}\n                onChange={(e) => setProjectName(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    e.preventDefault();\n                    handleSave();\n                  }\n                }}\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Preview URL: /preview/{projectName || \"project-name\"}\n                <br />\n                Deploy URL: /deploy?project={encodedProjectName}\n              </p>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setSaveDialogOpen(false);\n                setPendingAction(null);\n              }}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSave}\n              disabled={!projectName.trim() || totalComponentCount === 0}\n            >\n              {saveButtonLabel}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","\"use client\";\n\nimport { useDraggable } from \"@dnd-kit/core\";\nimport { motion } from \"framer-motion\";\nimport { Search } from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\n\nimport { componentsRegistry } from \"@/lib/components-registry\";\nimport { cn } from \"@/lib/utils\";\nimport { categoryNames } from \"@uitripled/shared\";\n\ntype ComponentItem = (typeof componentsRegistry)[number];\n\ntype BuilderSidebarProps = {\n  className?: string;\n  onSelectComponent?: (componentId: string) => void;\n  allowDrag?: boolean;\n};\n\nfunction DraggableComponent({ component }: { component: ComponentItem }) {\n  const { attributes, listeners, setNodeRef, transform, isDragging } =\n    useDraggable({\n      id: component.id,\n    });\n\n  const style = transform\n    ? {\n        transform: `translate3d(${transform.x}px, ${transform.y}px, 0)`,\n      }\n    : undefined;\n\n  return (\n    <motion.div\n      ref={setNodeRef}\n      style={style}\n      {...listeners}\n      {...attributes}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      className={cn(\n        \"cursor-grab rounded-lg border border-border bg-card p-3 transition-colors hover:border-primary hover:bg-accent/5 active:cursor-grabbing\",\n        isDragging && \"opacity-50\"\n      )}\n    >\n      <div className=\"text-sm font-medium\">{component.name}</div>\n      <div className=\"mt-1 text-xs text-muted-foreground\">\n        {component.description}\n      </div>\n      <div className=\"mt-2 flex flex-wrap gap-1\">\n        {component.tags.slice(0, 3).map((tag: string) => (\n          <span\n            key={tag}\n            className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\"\n          >\n            {tag}\n          </span>\n        ))}\n      </div>\n    </motion.div>\n  );\n}\n\nfunction SelectableComponent({\n  component,\n  onSelect,\n}: {\n  component: ComponentItem;\n  onSelect?: (componentId: string) => void;\n}) {\n  return (\n    <motion.button\n      type=\"button\"\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onClick={() => onSelect?.(component.id)}\n      className=\"w-full rounded-lg border border-border bg-card p-3 text-left transition-colors hover:border-primary hover:bg-accent/5 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30\"\n    >\n      <div className=\"text-sm font-medium\">{component.name}</div>\n      <div className=\"mt-1 text-xs text-muted-foreground\">\n        {component.description}\n      </div>\n      <div className=\"mt-2 flex flex-wrap gap-1\">\n        {component.tags.slice(0, 3).map((tag: string) => (\n          <span\n            key={tag}\n            className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\"\n          >\n            {tag}\n          </span>\n        ))}\n      </div>\n    </motion.button>\n  );\n}\n\nexport function BuilderSidebar({\n  className,\n  onSelectComponent,\n  allowDrag = true,\n}: BuilderSidebarProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const filteredAnimations = useMemo(() => {\n    const query = searchQuery.trim().toLowerCase();\n\n    return componentsRegistry\n      .filter(\n        (component) =>\n          component.display !== false &&\n          (component.category === \"blocks\" || component.category === \"resumes\")\n      )\n      .filter((component) => {\n        if (!query) return true;\n        return (\n          component.name.toLowerCase().includes(query) ||\n          component.description.toLowerCase().includes(query) ||\n          component.tags.some((tag: string) => tag.toLowerCase().includes(query))\n        );\n      });\n  }, [searchQuery]);\n\n  return (\n    <div className={cn(\"flex h-full flex-col bg-card\", className)}>\n      <div className=\"border-b border-border p-4\">\n        <h2 className=\"mb-4 text-lg font-semibold\">Component Library</h2>\n        <div className=\"relative mb-4\">\n          <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search components...\"\n            value={searchQuery}\n            onChange={(event) => setSearchQuery(event.target.value)}\n            className=\"w-full rounded-lg border border-border bg-background pl-10 pr-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20\"\n          />\n        </div>\n        <div className=\"mb-2 text-xs font-medium text-muted-foreground\">\n          Available Components\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          <span className=\"rounded-full bg-primary px-3 py-1 text-xs font-medium text-primary-foreground\">\n            {categoryNames.blocks}\n          </span>\n          <span className=\"rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground\">\n            Only blocks/resumes allowed\n          </span>\n        </div>\n        {!allowDrag && (\n          <p className=\"mt-3 text-xs text-muted-foreground\">\n            Tap a block to add it to your page.\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {filteredAnimations.length === 0 ? (\n          <div className=\"py-8 text-center text-sm text-muted-foreground\">\n            No components found\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {filteredAnimations.map((component) =>\n              allowDrag ? (\n                <DraggableComponent key={component.id} component={component} />\n              ) : (\n                <SelectableComponent\n                  key={component.id}\n                  component={component}\n                  onSelect={onSelectComponent}\n                />\n              )\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { BuilderSidebar } from \"@/components/builder-sidebar\";\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogTrigger,\n} from \"@uitripled/ui/components/ui/dialog\";\nimport { FolderOpen, Menu, X } from \"lucide-react\";\n\ntype BuilderHeaderProps = {\n  mobileSidebarOpen: boolean;\n  onMobileSidebarChange: (open: boolean) => void;\n  onLoadProjects: () => void;\n  onToggleTextEditing: () => void;\n  isTextEditing: boolean;\n  activeComponentCount: number;\n  onMobileComponentSelect: (animationId: string) => void;\n};\n\nexport function BuilderHeader({\n  mobileSidebarOpen,\n  onMobileSidebarChange,\n  onLoadProjects,\n  onToggleTextEditing,\n  isTextEditing,\n  activeComponentCount,\n  onMobileComponentSelect,\n}: BuilderHeaderProps) {\n  return (\n    <div className=\"border-b border-border bg-card px-4 py-3 sm:px-6\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"flex items-center gap-2\">\n          <h1 className=\"text-xl font-bold\">Page Builder</h1>\n          <Dialog open={mobileSidebarOpen} onOpenChange={onMobileSidebarChange}>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" size=\"sm\" className=\"gap-2 md:hidden\">\n                <Menu className=\"h-4 w-4\" />\n                Library\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"md:hidden inset-x-0 bottom-0 left-0 right-0 top-auto flex h-[calc(100vh-5rem)] max-w-none translate-x-0 translate-y-0 flex-col rounded-t-3xl border border-border bg-background p-0 pb-4 shadow-xl data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\">\n              <div className=\"flex items-center justify-between border-b border-border px-4 py-3\">\n                <div>\n                  <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">\n                    Component Library\n                  </p>\n                  <p className=\"text-sm font-semibold\">Blocks</p>\n                </div>\n                <DialogClose asChild>\n                  <Button variant=\"ghost\" size=\"icon\">\n                    <X className=\"h-4 w-4\" />\n                    <span className=\"sr-only\">Close</span>\n                  </Button>\n                </DialogClose>\n              </div>\n              <div className=\"flex-1 overflow-hidden\">\n                <BuilderSidebar\n                  allowDrag={false}\n                  className=\"flex h-full flex-col bg-background\"\n                  onSelectComponent={onMobileComponentSelect}\n                />\n              </div>\n            </DialogContent>\n          </Dialog>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\" onClick={onLoadProjects}>\n            <FolderOpen className=\"mr-2 h-4 w-4\" />\n            Load Project\n          </Button>\n          {/* <Button\n            variant={isTextEditing ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={onToggleTextEditing}\n            className=\"gap-2\"\n            disabled={activeComponentCount === 0}\n          >\n            <Type className=\"h-4 w-4\" />\n            {isTextEditing ? \"Done editing\" : \"Edit text\"}\n          </Button> */}\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { DragOverlay as DndDragOverlay } from \"@dnd-kit/core\";\n\ntype DragOverlayProps = {\n  activeComponentInfo: { name: string; type: \"canvas\" | \"sidebar\" } | null;\n};\n\nexport function DragOverlay({ activeComponentInfo }: DragOverlayProps) {\n  return (\n    <DndDragOverlay>\n      {activeComponentInfo && (\n        <div className=\"rounded-lg border-2 border-primary bg-card p-4 shadow-lg opacity-90\">\n          <div className=\"text-sm font-medium\">{activeComponentInfo.name}</div>\n          {activeComponentInfo.type === \"canvas\" && (\n            <div className=\"mt-1 text-xs text-muted-foreground\">\n              Reordering...\n            </div>\n          )}\n        </div>\n      )}\n    </DndDragOverlay>\n  );\n}\n","\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport { Card } from \"@uitripled/ui/components/ui/card\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Info } from \"lucide-react\";\n\ntype InstructionsBannerProps = {\n  show: boolean;\n  onHide: () => void;\n};\n\nexport function InstructionsBanner({ show, onHide }: InstructionsBannerProps) {\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: \"auto\" }}\n          exit={{ opacity: 0, height: 0 }}\n          className=\"border-b border-border bg-muted/30\"\n        >\n          <Card className=\"m-4 border-2 border-primary/20 bg-primary/5 p-4\">\n            <div className=\"flex items-start gap-3\">\n              <Info className=\"mt-0.5 h-5 w-5 flex-shrink-0 text-primary\" />\n              <div className=\"flex-1 space-y-2 text-sm\">\n                <h3 className=\"font-semibold text-foreground\">\n                  Important Notes\n                </h3>\n                <ul className=\"space-y-1.5 text-muted-foreground\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>\n                      The builder is just for previewing, not a final production\n                      setup\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>\n                      The builder is currently in beta and may have some bugs\n                      and limitations\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>The builder doesn&apos;t support auto-grid yet</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>Only blocks are allowed for use</span>\n                  </li>\n                </ul>\n                <div className=\"flex justify-end\">\n                  <Button\n                    variant=\"default\"\n                    className=\"flex justify-start\"\n                    size=\"sm\"\n                    onClick={onHide}\n                  >\n                    Hide\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </Card>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport { Card } from \"@uitripled/ui/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@uitripled/ui/components/ui/dialog\";\nimport { extractSavedPages } from \"@/lib/builder-utils\";\nimport type { SavedProject } from \"@uitripled/shared/builder\";\nimport { Eye, Trash2 } from \"lucide-react\";\n\ntype LoadProjectDialogProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  savedProjects: SavedProject[];\n  onLoadProject: (project: SavedProject) => void;\n  onDeleteProject: (projectName: string) => void;\n  onPreviewProject: (projectName: string) => void;\n};\n\nexport function LoadProjectDialog({\n  open,\n  onOpenChange,\n  savedProjects,\n  onLoadProject,\n  onDeleteProject,\n  onPreviewProject,\n}: LoadProjectDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Load Project</DialogTitle>\n          <DialogDescription>\n            Select a saved project to load into the builder\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"max-h-[400px] overflow-y-auto\">\n          {savedProjects.length === 0 ? (\n            <div className=\"py-8 text-center text-sm text-muted-foreground\">\n              No saved projects found. Create and save a project first.\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {savedProjects.map((project) => {\n                const pagesForProject = extractSavedPages(project);\n                const totalComponents = pagesForProject.reduce(\n                  (total, page) => total + (page.components?.length ?? 0),\n                  0\n                );\n                const savedDate = new Date(project.savedAt);\n\n                return (\n                  <Card\n                    key={project.name}\n                    className=\"p-4 transition-colors hover:bg-accent/50\"\n                  >\n                    <div className=\"flex items-start justify-between gap-4\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold\">{project.name}</h3>\n                        <p className=\"mt-1 text-sm text-muted-foreground\">\n                          {pagesForProject.length}{\" \"}\n                          {pagesForProject.length === 1 ? \"page\" : \"pages\"}\n                          {\" • \"}\n                          {totalComponents}{\" \"}\n                          {totalComponents === 1 ? \"component\" : \"components\"}\n                          {\" • \"}\n                          Saved {savedDate.toLocaleDateString()} at{\" \"}\n                          {savedDate.toLocaleTimeString()}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => onPreviewProject(project.name)}\n                        >\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            if (confirm(`Delete project \"${project.name}\"?`)) {\n                              onDeleteProject(project.name);\n                            }\n                          }}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          onClick={() => onLoadProject(project)}\n                        >\n                          Load\n                        </Button>\n                      </div>\n                    </div>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n        </div>\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport type { BuilderProjectPage } from \"@uitripled/shared/builder\";\nimport { Edit3, Plus, Trash2 } from \"lucide-react\";\n\ntype PageTabsProps = {\n  pages: BuilderProjectPage[];\n  activePage: BuilderProjectPage | null;\n  onSelectPage: (pageId: string) => void;\n  onAddPage: () => void;\n  onRenamePage: (pageId: string) => void;\n  onDeletePage: (pageId: string) => void;\n  activeRoute: string;\n};\n\nexport function PageTabs({\n  pages,\n  activePage,\n  onSelectPage,\n  onAddPage,\n  onRenamePage,\n  onDeletePage,\n  activeRoute,\n}: PageTabsProps) {\n  return (\n    <div className=\"px-4 pb-4 md:px-6\">\n      <div className=\"flex flex-wrap items-center gap-2\">\n        {pages.map((page, index) => (\n          <div\n            key={page.id}\n            className=\"flex items-center gap-1 rounded-lg border border-border bg-card/60 p-1\"\n          >\n            <Button\n              size=\"sm\"\n              variant={page.id === activePage?.id ? \"default\" : \"ghost\"}\n              className=\"gap-2\"\n              onClick={() => onSelectPage(page.id)}\n            >\n              {page.name}\n              {index === 0 && (\n                <span className=\"rounded-full bg-primary/15 px-2 py-0.5 text-[10px] font-semibold uppercase text-primary\">\n                  Home\n                </span>\n              )}\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-8 w-8 text-muted-foreground\"\n              onClick={() => onRenamePage(page.id)}\n              aria-label={`Rename ${page.name}`}\n            >\n              <Edit3 className=\"h-4 w-4\" />\n            </Button>\n            {pages.length > 1 && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-8 w-8 text-destructive\"\n                onClick={() => onDeletePage(page.id)}\n                aria-label={`Delete ${page.name}`}\n              >\n                <Trash2 className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n        ))}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"gap-1\"\n          onClick={onAddPage}\n        >\n          <Plus className=\"h-4 w-4\" />\n          Add page\n        </Button>\n      </div>\n      {activePage && (\n        <p className=\"mt-2 text-xs text-muted-foreground\">\n          Route:{\" \"}\n          <span className=\"font-mono text-foreground\">{activeRoute}</span>\n        </p>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\n\ntype TextEditingBannerProps = {\n  show: boolean;\n};\n\nexport function TextEditingBanner({ show }: TextEditingBannerProps) {\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -10 }}\n          className=\"mx-4 mb-4 rounded-md border border-primary/30 bg-primary/10 p-3 text-sm text-primary\"\n        >\n          Text editing mode enabled. Click highlighted text to edit. Dragging is\n          disabled while this mode is active.\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","\"use client\";\n\nimport { BuilderCanvas } from \"@/components/builder-canvas\";\nimport { BuilderCodeView } from \"@/components/builder-code-view\";\nimport { BuilderSidebar } from \"@/components/builder-sidebar\";\nimport { BuilderHeader } from \"@/components/builder/builder-header\";\nimport { DragOverlay } from \"@/components/builder/drag-overlay\";\nimport { InstructionsBanner } from \"@/components/builder/instructions-banner\";\nimport { LoadProjectDialog } from \"@/components/builder/load-project-dialog\";\nimport { PageTabs } from \"@/components/builder/page-tabs\";\nimport { TextEditingBanner } from \"@/components/builder/text-editing-banner\";\nimport {\n  createPage,\n  extractSavedPages,\n  generateUniqueSlug,\n} from \"@/lib/builder-utils\";\nimport { componentsRegistry } from \"@/lib/components-registry\";\nimport type {\n  BuilderComponent,\n  BuilderProjectPage,\n  SavedProject,\n} from \"@uitripled/shared/builder\";\nimport {\n  DndContext,\n  DragEndEvent,\n  DragStartEvent,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { arrayMove } from \"@dnd-kit/sortable\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\n\nexport default function BuilderPage() {\n  const [pages, setPages] = useState<BuilderProjectPage[]>(() => {\n    const initial = createPage(\"Landing\", []);\n    return [initial];\n  });\n  const [activePageId, setActivePageId] = useState<string>(\"\");\n  const [activeId, setActiveId] = useState<string | null>(null);\n  const [showInstructions, setShowInstructions] = useState(true);\n  const [loadDialogOpen, setLoadDialogOpen] = useState(false);\n  const [mobileSidebarOpen, setMobileSidebarOpen] = useState(false);\n  const [savedProjects, setSavedProjects] = useState<SavedProject[]>([]);\n  const [isTextEditing, setIsTextEditing] = useState(false);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8,\n      },\n    })\n  );\n\n  useEffect(() => {\n    if (pages.length === 0) {\n      if (activePageId) {\n        setActivePageId(\"\");\n      }\n      return;\n    }\n\n    const pageExists = pages.some((page) => page.id === activePageId);\n    if (!pageExists) {\n      setActivePageId(pages[0].id);\n    }\n  }, [pages, activePageId]);\n\n  const activePage = useMemo(() => {\n    if (!activePageId) {\n      return pages[0] ?? null;\n    }\n\n    const current = pages.find((page) => page.id === activePageId);\n    return current ?? pages[0] ?? null;\n  }, [pages, activePageId]);\n\n  const activeComponentCount = activePage?.components.length ?? 0;\n  const activePageIndex = activePage\n    ? pages.findIndex((page) => page.id === activePage.id)\n    : -1;\n  const activeRoute =\n    activePageIndex === 0 ? \"/\" : activePage ? `/${activePage.slug}` : \"/\";\n\n  useEffect(() => {\n    if (activeComponentCount === 0 && isTextEditing) {\n      setIsTextEditing(false);\n    }\n  }, [activeComponentCount, isTextEditing]);\n\n  const handleRegisterTextNode = useCallback(\n    (componentId: string, nodeId: string, originalText: string) => {\n      if (!activePageId) return;\n\n      setPages((prev) =>\n        prev.map((page) => {\n          if (page.id !== activePageId) return page;\n\n          return {\n            ...page,\n            components: page.components.map((component) => {\n              if (component.id !== componentId) return component;\n\n              const existing = component.textContent?.[nodeId];\n              if (existing) {\n                if (\n                  existing.value === existing.original &&\n                  existing.original !== originalText\n                ) {\n                  return {\n                    ...component,\n                    textContent: {\n                      ...(component.textContent ?? {}),\n                      [nodeId]: { original: originalText, value: originalText },\n                    },\n                  };\n                }\n                return component;\n              }\n\n              return {\n                ...component,\n                textContent: {\n                  ...(component.textContent ?? {}),\n                  [nodeId]: { original: originalText, value: originalText },\n                },\n              };\n            }),\n          };\n        })\n      );\n    },\n    [activePageId]\n  );\n\n  const handleUpdateTextNode = useCallback(\n    (componentId: string, nodeId: string, newValue: string) => {\n      if (!activePageId) return;\n\n      setPages((prev) =>\n        prev.map((page) => {\n          if (page.id !== activePageId) return page;\n\n          return {\n            ...page,\n            components: page.components.map((component) => {\n              if (component.id !== componentId) return component;\n\n              const existing = component.textContent?.[nodeId];\n              if (existing && existing.value === newValue) {\n                return component;\n              }\n\n              return {\n                ...component,\n                textContent: {\n                  ...(component.textContent ?? {}),\n                  [nodeId]: {\n                    original: existing?.original ?? newValue,\n                    value: newValue,\n                  },\n                },\n              };\n            }),\n          };\n        })\n      );\n    },\n    [activePageId]\n  );\n\n  const handleAddComponentToPage = useCallback(\n    (animationId: string) => {\n      const animation = componentsRegistry.find(\n        (item) => item.id === animationId\n      );\n      if (\n        !animation ||\n        (animation.category !== \"blocks\" && animation.category !== \"resumes\")\n      ) {\n        return;\n      }\n\n      const newComponent: BuilderComponent = {\n        id: `component-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n        animationId: animation.id,\n        animation,\n        textContent: {},\n      };\n\n      setPages((prev) => {\n        const targetPageId =\n          activePageId && prev.some((page) => page.id === activePageId)\n            ? activePageId\n            : prev[0]?.id;\n\n        if (!targetPageId) {\n          return prev;\n        }\n\n        return prev.map((page) =>\n          page.id === targetPageId\n            ? { ...page, components: [...page.components, newComponent] }\n            : page\n        );\n      });\n    },\n    [activePageId]\n  );\n\n  const handleMobileComponentSelect = useCallback(\n    (animationId: string) => {\n      handleAddComponentToPage(animationId);\n      setMobileSidebarOpen(false);\n    },\n    [handleAddComponentToPage]\n  );\n\n  const handleDragStart = (event: DragStartEvent) => {\n    if (isTextEditing) return;\n    setActiveId(event.active.id as string);\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    if (isTextEditing) {\n      setActiveId(null);\n      return;\n    }\n    const currentPage = activePage;\n    if (!currentPage) {\n      setActiveId(null);\n      return;\n    }\n    const { active, over } = event;\n\n    if (!over) {\n      setActiveId(null);\n      return;\n    }\n\n    const activeId = active.id as string;\n    const overId = over.id as string;\n\n    // Check if we're reordering components within the canvas\n    const activeIndex = currentPage.components.findIndex(\n      (c) => c.id === activeId\n    );\n    const overIndex = currentPage.components.findIndex((c) => c.id === overId);\n\n    if (activeIndex !== -1 && overIndex !== -1 && activeIndex !== overIndex) {\n      // Reordering existing components\n      setPages((prev) =>\n        prev.map((page) =>\n          page.id === currentPage.id\n            ? {\n                ...page,\n                components: arrayMove(page.components, activeIndex, overIndex),\n              }\n            : page\n        )\n      );\n      setActiveId(null);\n      return;\n    }\n\n    // Check if dragging from sidebar to canvas\n    const animation = componentsRegistry.find((a) => a.id === activeId);\n\n    // Only allow blocks category components\n    if (\n      animation &&\n      animation.category !== \"blocks\" &&\n      animation.category !== \"resumes\"\n    ) {\n      setActiveId(null);\n      return;\n    }\n\n    if (animation && (overId === \"builder-canvas\" || overIndex !== -1)) {\n      // Add new component to canvas\n      const newComponent: BuilderComponent = {\n        id: `component-${Date.now()}-${Math.random()}`,\n        animationId: animation.id,\n        animation,\n        textContent: {},\n      };\n\n      // If dropped over a component, insert at that position\n      if (overIndex !== -1) {\n        setPages((prev) =>\n          prev.map((page) => {\n            if (page.id !== currentPage.id) return page;\n            const newItems = [...page.components];\n            newItems.splice(overIndex, 0, newComponent);\n            return {\n              ...page,\n              components: newItems,\n            };\n          })\n        );\n      } else {\n        // If dropped on canvas, append to end\n        setPages((prev) =>\n          prev.map((page) =>\n            page.id === currentPage.id\n              ? { ...page, components: [...page.components, newComponent] }\n              : page\n          )\n        );\n      }\n    }\n\n    setActiveId(null);\n  };\n\n  const handleDeleteComponent = (id: string) => {\n    if (!activePage) return;\n\n    setPages((prev) =>\n      prev.map((page) =>\n        page.id === activePage.id\n          ? {\n              ...page,\n              components: page.components.filter(\n                (component) => component.id !== id\n              ),\n            }\n          : page\n      )\n    );\n  };\n\n  const handleSelectPage = (pageId: string) => {\n    setActivePageId(pageId);\n    setIsTextEditing(false);\n    setActiveId(null);\n  };\n\n  const handleAddPage = () => {\n    const defaultName = `Page ${pages.length + 1}`;\n    const input = window.prompt(\"Enter a name for the new page\", defaultName);\n    const normalized = input?.trim();\n    if (!normalized) {\n      return;\n    }\n\n    const existingSlugs = pages.map((page) => page.slug);\n    const newPage = createPage(normalized, existingSlugs);\n    setPages((prev) => [...prev, newPage]);\n    setActivePageId(newPage.id);\n    setIsTextEditing(false);\n    setActiveId(null);\n  };\n\n  const handleRenamePage = (pageId: string) => {\n    const page = pages.find((item) => item.id === pageId);\n    if (!page) return;\n\n    const input = window.prompt(\"Rename page\", page.name);\n    const normalized = input?.trim();\n    if (!normalized || normalized === page.name) {\n      return;\n    }\n\n    const existingSlugs = pages\n      .filter((p) => p.id !== pageId)\n      .map((p) => p.slug);\n    const newSlug = generateUniqueSlug(normalized, existingSlugs);\n\n    setPages((prev) =>\n      prev.map((item) =>\n        item.id === pageId\n          ? {\n              ...item,\n              name: normalized,\n              slug: newSlug,\n            }\n          : item\n      )\n    );\n  };\n\n  const handleDeletePage = (pageId: string) => {\n    if (pages.length <= 1) {\n      window.alert(\"You need at least one page in the project.\");\n      return;\n    }\n\n    const page = pages.find((item) => item.id === pageId);\n    if (!page) return;\n\n    const confirmed = window.confirm(`Delete page \"${page.name}\"?`);\n    if (!confirmed) return;\n\n    const remainingPages = pages.filter((item) => item.id !== pageId);\n    setPages(remainingPages);\n    setIsTextEditing(false);\n    setActiveId(null);\n\n    if (activePageId === pageId) {\n      setActivePageId(remainingPages[0]?.id ?? \"\");\n    }\n  };\n\n  const loadSavedProjects = () => {\n    const projects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    const projectList = Object.values(projects) as SavedProject[];\n    setSavedProjects(\n      projectList.sort(\n        (a, b) => new Date(b.savedAt).getTime() - new Date(a.savedAt).getTime()\n      )\n    );\n    setLoadDialogOpen(true);\n  };\n\n  const loadProject = (project: SavedProject) => {\n    const rawPages = extractSavedPages(project);\n    const slugsInUse: string[] = [];\n\n    const derivedPages = rawPages.map<BuilderProjectPage>((page, index) => {\n      const safeName = page.name?.trim() || `Page ${index + 1}`;\n      const slugBase = page.slug?.trim() || safeName;\n      const slug = generateUniqueSlug(slugBase, slugsInUse);\n      slugsInUse.push(slug);\n\n      const pageId =\n        page.id && page.id.length > 0\n          ? page.id\n          : typeof crypto !== \"undefined\" &&\n              typeof crypto.randomUUID === \"function\"\n            ? crypto.randomUUID()\n            : `page-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n\n      const builderComponents = (page.components ?? [])\n        .map<BuilderComponent | null>((comp) => {\n          const animation = componentsRegistry.find(\n            (a) => a.id === comp.animationId\n          );\n          if (!animation) {\n            return null;\n          }\n\n          return {\n            id:\n              comp.id && comp.id.length > 0\n                ? comp.id\n                : `component-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n            animationId: comp.animationId,\n            animation,\n            textContent: comp.textContent ?? {},\n          };\n        })\n        .filter((value): value is BuilderComponent => Boolean(value));\n\n      return {\n        id: pageId,\n        name: safeName,\n        slug,\n        components: builderComponents,\n      };\n    });\n\n    const finalPages =\n      derivedPages.length > 0 ? derivedPages : [createPage(\"Landing\", [])];\n\n    setPages(finalPages);\n    setLoadDialogOpen(false);\n    setIsTextEditing(false);\n    setActiveId(null);\n\n    const desiredActiveId =\n      project.entryPageId &&\n      finalPages.some((page) => page.id === project.entryPageId)\n        ? project.entryPageId\n        : finalPages[0].id;\n\n    setActivePageId(desiredActiveId);\n  };\n\n  const deleteProject = (projectName: string) => {\n    const projects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    delete projects[projectName];\n    localStorage.setItem(\"builderProjects\", JSON.stringify(projects));\n    loadSavedProjects(); // Refresh the list\n  };\n\n  const previewProject = (projectName: string) => {\n    window.open(`/preview/${encodeURIComponent(projectName)}`, \"_blank\");\n  };\n\n  // Get active component info for drag overlay\n  const getActiveComponentInfo = () => {\n    if (!activeId) return null;\n\n    for (const page of pages) {\n      const canvasComponent = page.components.find(\n        (component) => component.id === activeId\n      );\n      if (canvasComponent) {\n        return {\n          name: canvasComponent.animation.name,\n          type: \"canvas\" as const,\n        };\n      }\n    }\n\n    const animation = componentsRegistry.find((a) => a.id === activeId);\n    if (animation) {\n      return { name: animation.name, type: \"sidebar\" as const };\n    }\n\n    return null;\n  };\n\n  const activeComponentInfo = getActiveComponentInfo();\n\n  return (\n    <div className=\"flex h-screen flex-col bg-background\">\n      <BuilderHeader\n        mobileSidebarOpen={mobileSidebarOpen}\n        onMobileSidebarChange={setMobileSidebarOpen}\n        onLoadProjects={loadSavedProjects}\n        onToggleTextEditing={() => setIsTextEditing((prev) => !prev)}\n        isTextEditing={isTextEditing}\n        activeComponentCount={activeComponentCount}\n        onMobileComponentSelect={handleMobileComponentSelect}\n      />\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        <DndContext\n          sensors={sensors}\n          onDragStart={handleDragStart}\n          onDragEnd={handleDragEnd}\n        >\n          {/* Left Sidebar */}\n          <BuilderSidebar\n            className=\"hidden h-full w-80 border-r border-border md:flex\"\n            onSelectComponent={handleAddComponentToPage}\n          />\n\n          {/* Main Canvas Area */}\n          <div className=\"flex flex-1 flex-col overflow-y-auto md:overflow-hidden\">\n            <InstructionsBanner\n              show={showInstructions}\n              onHide={() => setShowInstructions(false)}\n            />\n\n            <TextEditingBanner show={isTextEditing} />\n\n            <PageTabs\n              pages={pages}\n              activePage={activePage}\n              onSelectPage={handleSelectPage}\n              onAddPage={handleAddPage}\n              onRenamePage={handleRenamePage}\n              onDeletePage={handleDeletePage}\n              activeRoute={activeRoute}\n            />\n\n            <div className=\"md:flex-1 md:overflow-y-auto p-4 md:p-6\">\n              <BuilderCanvas\n                components={activePage?.components ?? []}\n                onDelete={handleDeleteComponent}\n                isTextEditing={isTextEditing}\n                onRegisterTextNode={handleRegisterTextNode}\n                onUpdateTextNode={handleUpdateTextNode}\n              />\n            </div>\n\n            {/* Code View */}\n            <BuilderCodeView\n              pages={pages}\n              activePageId={activePage?.id ?? null}\n            />\n          </div>\n\n          <DragOverlay activeComponentInfo={activeComponentInfo} />\n        </DndContext>\n      </div>\n\n      <LoadProjectDialog\n        open={loadDialogOpen}\n        onOpenChange={setLoadDialogOpen}\n        savedProjects={savedProjects}\n        onLoadProject={loadProject}\n        onDeleteProject={deleteProject}\n        onPreviewProject={previewProject}\n      />\n    </div>\n  );\n}\n","/**\n * Merges multiple React component files by deduplicating and organizing imports\n * @param {string} code - The combined code from multiple components\n * @returns {string} - Clean code with deduplicated imports at the top\n */\nexport function mergeComponentImports(code: string): string {\n  const lines = code.split(\"\\n\");\n  const imports = new Map<\n    string,\n    {\n      default: string | null;\n      named: Set<string>;\n      namespace: string | null;\n      sideEffect: boolean;\n    }\n  >();\n  const nonImportLines: string[] = [];\n  let useClientFound = false;\n\n  // Regular expressions for different import types\n  const importRegex = /^import\\s+/;\n  const namedImportRegex =\n    /^import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"]/;\n  const defaultImportRegex = /^import\\s+(\\w+)\\s+from\\s*['\"]([^'\"]+)['\"]/;\n  const defaultAndNamedRegex =\n    /^import\\s+(\\w+)\\s*,\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"]/;\n  const namespaceImportRegex =\n    /^import\\s+\\*\\s+as\\s+(\\w+)\\s+from\\s*['\"]([^'\"]+)['\"]/;\n  const sideEffectImportRegex = /^import\\s*['\"]([^'\"]+)['\"]/;\n\n  let currentMultilineImport: string | null = null;\n\n  for (const line of lines) {\n    const trimmedLine = line.trim();\n\n    // Handle 'use client' directive\n    if (/^(['\"])use client\\1;?\\s*(\\/\\/.*)?$/.test(trimmedLine)) {\n      useClientFound = true;\n      continue;\n    }\n\n    // Check if we're continuing a multiline import\n    if (currentMultilineImport !== null) {\n      currentMultilineImport += \" \" + trimmedLine;\n\n      // Check if this line completes the import (has closing brace and from)\n      if (trimmedLine.includes(\"}\") && trimmedLine.includes(\"from\")) {\n        const match = currentMultilineImport.match(\n          /import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"]/\n        );\n        if (match) {\n          const [, namedImports, source] = match;\n\n          if (!imports.has(source)) {\n            imports.set(source, {\n              default: null,\n              named: new Set(),\n              namespace: null,\n              sideEffect: false,\n            });\n          }\n\n          // Split by comma and clean up each import name\n          namedImports.split(\",\").forEach((name) => {\n            const cleanName = name.trim();\n            if (cleanName) {\n              // Only add non-empty names\n              imports.get(source)!.named.add(cleanName);\n            }\n          });\n        }\n\n        currentMultilineImport = null;\n        continue;\n      } else if (trimmedLine.includes(\"}\")) {\n        // Has closing brace but no 'from' yet, continue collecting\n        continue;\n      } else {\n        // Still in the middle of named imports\n        continue;\n      }\n    }\n\n    // Skip empty lines and comments at the top\n    if (!trimmedLine || trimmedLine.startsWith(\"//\")) {\n      if (!importRegex.test(trimmedLine)) {\n        nonImportLines.push(line);\n      }\n      continue;\n    }\n\n    // Process import statements\n    if (importRegex.test(trimmedLine)) {\n      let match: RegExpMatchArray | null;\n\n      // Handle multiline import that starts but doesn't complete on this line\n      // Check this FIRST before trying to match complete imports\n      if (trimmedLine.match(/^import\\s*{/) && !trimmedLine.includes(\"from\")) {\n        currentMultilineImport = trimmedLine;\n        continue;\n      }\n      // Handle: import Default, { named } from 'module'\n      else if ((match = trimmedLine.match(defaultAndNamedRegex))) {\n        const [, defaultImport, namedImports, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        const importData = imports.get(source)!;\n        importData.default = defaultImport;\n\n        namedImports.split(\",\").forEach((name) => {\n          const cleanName = name.trim();\n          if (cleanName) {\n            // Only add non-empty names\n            importData.named.add(cleanName);\n          }\n        });\n      }\n      // Handle: import { named } from 'module'\n      else if ((match = trimmedLine.match(namedImportRegex))) {\n        const [, namedImports, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        namedImports.split(\",\").forEach((name) => {\n          const cleanName = name.trim();\n          if (cleanName) {\n            // Only add non-empty names\n            imports.get(source)!.named.add(cleanName);\n          }\n        });\n      }\n      // Handle: import Default from 'module'\n      else if ((match = trimmedLine.match(defaultImportRegex))) {\n        const [, defaultImport, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        // Only set default if not already set (first one wins)\n        if (!imports.get(source)!.default) {\n          imports.get(source)!.default = defaultImport;\n        }\n      }\n      // Handle: import * as namespace from 'module'\n      else if ((match = trimmedLine.match(namespaceImportRegex))) {\n        const [, namespace, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        imports.get(source)!.namespace = namespace;\n      }\n      // Handle: import 'module' (side effect)\n      else if ((match = trimmedLine.match(sideEffectImportRegex))) {\n        const [, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: true,\n          });\n        }\n      }\n    } else {\n      nonImportLines.push(line);\n    }\n  }\n\n  // Build the final code\n  let result = \"\";\n\n  // Add 'use client' if found\n  if (useClientFound) {\n    result += \"'use client'\\n\\n\";\n  }\n\n  // Sort imports: external packages first, then relative imports\n  const sortedImports = Array.from(imports.entries()).sort(([a], [b]) => {\n    const aIsRelative = a.startsWith(\".\") || a.startsWith(\"@/\");\n    const bIsRelative = b.startsWith(\".\") || b.startsWith(\"@/\");\n\n    if (aIsRelative && !bIsRelative) return 1;\n    if (!aIsRelative && bIsRelative) return -1;\n    return a.localeCompare(b);\n  });\n\n  // Generate import statements\n  sortedImports.forEach(([source, data]) => {\n    if (\n      data.sideEffect &&\n      !data.default &&\n      data.named.size === 0 &&\n      !data.namespace\n    ) {\n      result += `import '${source}'\\n`;\n    } else if (data.namespace) {\n      result += `import * as ${data.namespace} from '${source}'\\n`;\n    } else {\n      const parts: string[] = [];\n\n      if (data.default) {\n        parts.push(data.default);\n      }\n\n      if (data.named.size > 0) {\n        const namedImports = Array.from(data.named).sort().join(\", \");\n        parts.push(`{ ${namedImports} }`);\n      }\n\n      if (parts.length > 0) {\n        result += `import ${parts.join(\", \")} from '${source}'\\n`;\n      }\n    }\n  });\n\n  // Add a blank line after imports if there are any\n  if (sortedImports.length > 0) {\n    result += \"\\n\";\n  }\n\n  // Add the rest of the code\n  result += nonImportLines.join(\"\\n\");\n\n  return result;\n}\n","import type {\n  BuilderProjectPage,\n  SavedProject,\n  SavedProjectPage,\n} from \"@uitripled/shared/builder\";\n\nexport const sanitizeSlug = (value: string) =>\n  value\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\")\n    .slice(0, 48);\n\nexport function generateUniqueSlug(\n  baseName: string,\n  existingSlugs: string[]\n): string {\n  const baseSlug = sanitizeSlug(baseName) || \"page\";\n  if (!existingSlugs.includes(baseSlug)) {\n    return baseSlug;\n  }\n\n  let attempt = 2;\n  let candidate = `${baseSlug}-${attempt}`;\n  while (existingSlugs.includes(candidate)) {\n    attempt += 1;\n    candidate = `${baseSlug}-${attempt}`;\n  }\n\n  return candidate;\n}\n\nexport function createPage(\n  name: string,\n  existingSlugs: string[]\n): BuilderProjectPage {\n  const id =\n    typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\"\n      ? crypto.randomUUID()\n      : `page-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n\n  const slug = generateUniqueSlug(name, existingSlugs);\n\n  return {\n    id,\n    name,\n    slug,\n    components: [],\n  };\n}\n\nexport function extractSavedPages(project: SavedProject): SavedProjectPage[] {\n  if (project.pages && project.pages.length > 0) {\n    return project.pages;\n  }\n\n  return [\n    {\n      id:\n        project.entryPageId ||\n        `page-${sanitizeSlug(project.name || \"landing\") || \"landing\"}`,\n      name: \"Landing\",\n      slug: \"landing\",\n      components: project.components ?? [],\n      code: project.code,\n    },\n  ];\n}\n\nexport function countSavedProjectComponents(project: SavedProject): number {\n  return extractSavedPages(project).reduce(\n    (total, page) => total + (page.components?.length ?? 0),\n    0\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M13 21h8', key: '1jsn5i' }],\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n];\n\n/**\n * @component @name PenLine\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMgMjFoOCIgLz4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-line\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenLine = createLucideIcon('pen-line', __iconNode);\n\nexport default PenLine;\n"],"names":[],"mappings":"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","ignoreList":[12]}