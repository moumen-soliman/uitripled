{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder-canvas.tsx"],"sourcesContent":["\"use client\";\n\nimport type { BuilderComponent } from \"@uitripled/shared/builder\";\nimport { useDroppable } from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  useSortable,\n  verticalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { X } from \"lucide-react\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\ntype CanvasComponentProps = {\n  component: BuilderComponent;\n  onDelete: (id: string) => void;\n  isTextEditing: boolean;\n  onRegisterTextNode: (\n    componentId: string,\n    nodeId: string,\n    originalText: string\n  ) => void;\n  onUpdateTextNode: (\n    componentId: string,\n    nodeId: string,\n    newValue: string\n  ) => void;\n};\n\nfunction CanvasComponent({\n  component,\n  onDelete,\n  isTextEditing,\n  onRegisterTextNode,\n  onUpdateTextNode,\n}: CanvasComponentProps) {\n  const [isHovered, setIsHovered] = useState(false);\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n    isOver,\n  } = useSortable({\n    id: component.id,\n    disabled: isTextEditing,\n  });\n\n  const contentRef = useRef<HTMLDivElement | null>(null);\n\n  const handleTextChange = useCallback(\n    (event: Event) => {\n      const target = event.target as HTMLElement | null;\n      if (!target) return;\n      const textId = target.dataset.builderTextId;\n      if (!textId) return;\n\n      const newValue = target.textContent ?? \"\";\n      onUpdateTextNode(component.id, textId, newValue);\n    },\n    [component.id, onUpdateTextNode]\n  );\n\n  useEffect(() => {\n    const container = contentRef.current;\n    if (!container) return;\n\n    const selector =\n      \"h1,h2,h3,h4,h5,h6,p,span,button,a,li,blockquote,figcaption,label,strong,em,small,div\";\n    const allElements = Array.from(\n      container.querySelectorAll<HTMLElement>(selector)\n    );\n\n    const editableElements = allElements.filter((el) => {\n      const text = el.textContent?.trim();\n      if (!text) {\n        return false;\n      }\n\n      const hasChildWithText = Array.from(\n        el.querySelectorAll<HTMLElement>(selector)\n      ).some((child) => {\n        if (child === el) return false;\n        const childText = child.textContent?.trim();\n        return !!childText;\n      });\n\n      if (hasChildWithText) {\n        return false;\n      }\n\n      return true;\n    });\n\n    editableElements.forEach((el, index) => {\n      const textId = `${component.id}-${index}`;\n      el.dataset.builderTextId = textId;\n      onRegisterTextNode(component.id, textId, el.textContent ?? \"\");\n\n      const storedValue = component.textContent?.[textId]?.value;\n      if (storedValue !== undefined && storedValue !== el.textContent) {\n        el.textContent = storedValue;\n      }\n      el.removeEventListener(\"input\", handleTextChange);\n      el.removeEventListener(\"blur\", handleTextChange);\n\n      if (isTextEditing) {\n        el.setAttribute(\"contenteditable\", \"true\");\n        el.setAttribute(\"spellcheck\", \"false\");\n        el.style.outline = \"1px dashed var(--primary)\";\n        el.style.outlineOffset = \"2px\";\n        el.style.cursor = \"text\";\n        el.addEventListener(\"input\", handleTextChange);\n        el.addEventListener(\"blur\", handleTextChange);\n      } else {\n        el.removeAttribute(\"contenteditable\");\n        el.removeAttribute(\"spellcheck\");\n        el.style.outline = \"\";\n        el.style.outlineOffset = \"\";\n        el.style.cursor = \"\";\n      }\n    });\n\n    return () => {\n      editableElements.forEach((el) => {\n        el.removeEventListener(\"input\", handleTextChange);\n        el.removeEventListener(\"blur\", handleTextChange);\n      });\n    };\n  }, [\n    component.id,\n    component.textContent,\n    handleTextChange,\n    isTextEditing,\n    onRegisterTextNode,\n  ]);\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  };\n\n  const Component = component.animation.component;\n\n  return (\n    <motion.div\n      ref={setNodeRef}\n      style={style}\n      {...attributes}\n      {...(!isTextEditing ? listeners : {})}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      className={`group relative mb-4 rounded-lg border-2 border-dashed bg-card/50 p-4 transition-all ${\n        isOver && !isDragging\n          ? \"border-primary border-solid bg-primary/10\"\n          : isDragging\n            ? \"border-border opacity-50\"\n            : \"border-border hover:border-primary\"\n      } ${isTextEditing ? \"cursor-text\" : \"\"}`}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n    >\n      {/* Delete Button */}\n      <AnimatePresence>\n        {isHovered && (\n          <motion.button\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.8 }}\n            onClick={(e) => {\n              e.stopPropagation();\n              onDelete(component.id);\n            }}\n            className=\"absolute -right-2 -top-2 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-lg transition-colors hover:bg-destructive/90\"\n          >\n            <X className=\"h-4 w-4\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n\n      {/* Component Label */}\n      <div className=\"mb-2 flex items-center justify-between\">\n        <span className=\"text-xs font-medium text-muted-foreground\">\n          {component.animation.name}\n        </span>\n      </div>\n\n      {/* Rendered Component */}\n      <div\n        ref={contentRef}\n        className=\"relative w-full overflow-hidden rounded-lg bg-background\"\n      >\n        <div className=\"w-full overflow-x-auto\">\n          <div className=\"min-w-full\">\n            <Component />\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\ntype BuilderCanvasProps = {\n  components: BuilderComponent[];\n  onDelete: (id: string) => void;\n  isTextEditing: boolean;\n  onRegisterTextNode: (\n    componentId: string,\n    nodeId: string,\n    originalText: string\n  ) => void;\n  onUpdateTextNode: (\n    componentId: string,\n    nodeId: string,\n    newValue: string\n  ) => void;\n};\n\nexport function BuilderCanvas({\n  components,\n  onDelete,\n  isTextEditing,\n  onRegisterTextNode,\n  onUpdateTextNode,\n}: BuilderCanvasProps) {\n  const { setNodeRef, isOver } = useDroppable({\n    id: \"builder-canvas\",\n  });\n\n  const componentIds = components.map((c) => c.id);\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={`min-h-full rounded-lg border-2 border-dashed p-4 md:p-6 transition-colors ${\n        isOver ? \"border-primary bg-primary/5\" : \"border-border bg-muted/30\"\n      }`}\n    >\n      {components.length === 0 ? (\n        <div className=\"flex h-full min-h-[400px] flex-col items-center justify-center text-center\">\n          <div className=\"mb-4 text-muted-foreground\">\n            <svg\n              className=\"mx-auto h-16 w-16\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={1.5}\n                d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n              />\n            </svg>\n          </div>\n          <h3 className=\"mb-2 text-lg font-semibold\">Empty Canvas</h3>\n          <p className=\"max-w-md text-sm text-muted-foreground\">\n            Drag components from the sidebar to start building your page.\n            Components will be automatically responsive.\n          </p>\n        </div>\n      ) : (\n        <SortableContext\n          items={componentIds}\n          strategy={verticalListSortingStrategy}\n        >\n          <AnimatePresence mode=\"popLayout\">\n            {components.map((component) => (\n              <CanvasComponent\n                key={component.id}\n                component={component}\n                onDelete={onDelete}\n                isTextEditing={isTextEditing}\n                onRegisterTextNode={onRegisterTextNode}\n                onUpdateTextNode={onUpdateTextNode}\n              />\n            ))}\n          </AnimatePresence>\n        </SortableContext>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/lib/merge-imports.ts"],"sourcesContent":["/**\n * Merges multiple React component files by deduplicating and organizing imports\n * @param {string} code - The combined code from multiple components\n * @returns {string} - Clean code with deduplicated imports at the top\n */\nexport function mergeComponentImports(code: string): string {\n  const lines = code.split(\"\\n\");\n  const imports = new Map<\n    string,\n    {\n      default: string | null;\n      named: Set<string>;\n      namespace: string | null;\n      sideEffect: boolean;\n    }\n  >();\n  const nonImportLines: string[] = [];\n  let useClientFound = false;\n\n  // Regular expressions for different import types\n  const importRegex = /^import\\s+/;\n  const namedImportRegex =\n    /^import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"]/;\n  const defaultImportRegex = /^import\\s+(\\w+)\\s+from\\s*['\"]([^'\"]+)['\"]/;\n  const defaultAndNamedRegex =\n    /^import\\s+(\\w+)\\s*,\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"]/;\n  const namespaceImportRegex =\n    /^import\\s+\\*\\s+as\\s+(\\w+)\\s+from\\s*['\"]([^'\"]+)['\"]/;\n  const sideEffectImportRegex = /^import\\s*['\"]([^'\"]+)['\"]/;\n\n  let currentMultilineImport: string | null = null;\n\n  for (const line of lines) {\n    const trimmedLine = line.trim();\n\n    // Handle 'use client' directive\n    if (/^(['\"])use client\\1;?\\s*(\\/\\/.*)?$/.test(trimmedLine)) {\n      useClientFound = true;\n      continue;\n    }\n\n    // Check if we're continuing a multiline import\n    if (currentMultilineImport !== null) {\n      currentMultilineImport += \" \" + trimmedLine;\n\n      // Check if this line completes the import (has closing brace and from)\n      if (trimmedLine.includes(\"}\") && trimmedLine.includes(\"from\")) {\n        const match = currentMultilineImport.match(\n          /import\\s*{\\s*([^}]+)\\s*}\\s*from\\s*['\"]([^'\"]+)['\"]/\n        );\n        if (match) {\n          const [, namedImports, source] = match;\n\n          if (!imports.has(source)) {\n            imports.set(source, {\n              default: null,\n              named: new Set(),\n              namespace: null,\n              sideEffect: false,\n            });\n          }\n\n          // Split by comma and clean up each import name\n          namedImports.split(\",\").forEach((name) => {\n            const cleanName = name.trim();\n            if (cleanName) {\n              // Only add non-empty names\n              imports.get(source)!.named.add(cleanName);\n            }\n          });\n        }\n\n        currentMultilineImport = null;\n        continue;\n      } else if (trimmedLine.includes(\"}\")) {\n        // Has closing brace but no 'from' yet, continue collecting\n        continue;\n      } else {\n        // Still in the middle of named imports\n        continue;\n      }\n    }\n\n    // Skip empty lines and comments at the top\n    if (!trimmedLine || trimmedLine.startsWith(\"//\")) {\n      if (!importRegex.test(trimmedLine)) {\n        nonImportLines.push(line);\n      }\n      continue;\n    }\n\n    // Process import statements\n    if (importRegex.test(trimmedLine)) {\n      let match: RegExpMatchArray | null;\n\n      // Handle multiline import that starts but doesn't complete on this line\n      // Check this FIRST before trying to match complete imports\n      if (trimmedLine.match(/^import\\s*{/) && !trimmedLine.includes(\"from\")) {\n        currentMultilineImport = trimmedLine;\n        continue;\n      }\n      // Handle: import Default, { named } from 'module'\n      else if ((match = trimmedLine.match(defaultAndNamedRegex))) {\n        const [, defaultImport, namedImports, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        const importData = imports.get(source)!;\n        importData.default = defaultImport;\n\n        namedImports.split(\",\").forEach((name) => {\n          const cleanName = name.trim();\n          if (cleanName) {\n            // Only add non-empty names\n            importData.named.add(cleanName);\n          }\n        });\n      }\n      // Handle: import { named } from 'module'\n      else if ((match = trimmedLine.match(namedImportRegex))) {\n        const [, namedImports, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        namedImports.split(\",\").forEach((name) => {\n          const cleanName = name.trim();\n          if (cleanName) {\n            // Only add non-empty names\n            imports.get(source)!.named.add(cleanName);\n          }\n        });\n      }\n      // Handle: import Default from 'module'\n      else if ((match = trimmedLine.match(defaultImportRegex))) {\n        const [, defaultImport, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        // Only set default if not already set (first one wins)\n        if (!imports.get(source)!.default) {\n          imports.get(source)!.default = defaultImport;\n        }\n      }\n      // Handle: import * as namespace from 'module'\n      else if ((match = trimmedLine.match(namespaceImportRegex))) {\n        const [, namespace, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: false,\n          });\n        }\n\n        imports.get(source)!.namespace = namespace;\n      }\n      // Handle: import 'module' (side effect)\n      else if ((match = trimmedLine.match(sideEffectImportRegex))) {\n        const [, source] = match;\n\n        if (!imports.has(source)) {\n          imports.set(source, {\n            default: null,\n            named: new Set(),\n            namespace: null,\n            sideEffect: true,\n          });\n        }\n      }\n    } else {\n      nonImportLines.push(line);\n    }\n  }\n\n  // Build the final code\n  let result = \"\";\n\n  // Add 'use client' if found\n  if (useClientFound) {\n    result += \"'use client'\\n\\n\";\n  }\n\n  // Sort imports: external packages first, then relative imports\n  const sortedImports = Array.from(imports.entries()).sort(([a], [b]) => {\n    const aIsRelative = a.startsWith(\".\") || a.startsWith(\"@/\");\n    const bIsRelative = b.startsWith(\".\") || b.startsWith(\"@/\");\n\n    if (aIsRelative && !bIsRelative) return 1;\n    if (!aIsRelative && bIsRelative) return -1;\n    return a.localeCompare(b);\n  });\n\n  // Generate import statements\n  sortedImports.forEach(([source, data]) => {\n    if (\n      data.sideEffect &&\n      !data.default &&\n      data.named.size === 0 &&\n      !data.namespace\n    ) {\n      result += `import '${source}'\\n`;\n    } else if (data.namespace) {\n      result += `import * as ${data.namespace} from '${source}'\\n`;\n    } else {\n      const parts: string[] = [];\n\n      if (data.default) {\n        parts.push(data.default);\n      }\n\n      if (data.named.size > 0) {\n        const namedImports = Array.from(data.named).sort().join(\", \");\n        parts.push(`{ ${namedImports} }`);\n      }\n\n      if (parts.length > 0) {\n        result += `import ${parts.join(\", \")} from '${source}'\\n`;\n      }\n    }\n  });\n\n  // Add a blank line after imports if there are any\n  if (sortedImports.length > 0) {\n    result += \"\\n\";\n  }\n\n  // Add the rest of the code\n  result += nonImportLines.join(\"\\n\");\n\n  return result;\n}\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;AACM,SAAS,sBAAsB,IAAY;IAChD,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,MAAM,UAAU,IAAI;IASpB,MAAM,iBAA2B,EAAE;IACnC,IAAI,iBAAiB;IAErB,iDAAiD;IACjD,MAAM,cAAc;IACpB,MAAM,mBACJ;IACF,MAAM,qBAAqB;IAC3B,MAAM,uBACJ;IACF,MAAM,uBACJ;IACF,MAAM,wBAAwB;IAE9B,IAAI,yBAAwC;IAE5C,KAAK,MAAM,QAAQ,MAAO;QACxB,MAAM,cAAc,KAAK,IAAI;QAE7B,gCAAgC;QAChC,IAAI,qCAAqC,IAAI,CAAC,cAAc;YAC1D,iBAAiB;YACjB;QACF;QAEA,+CAA+C;QAC/C,IAAI,2BAA2B,MAAM;YACnC,0BAA0B,MAAM;YAEhC,uEAAuE;YACvE,IAAI,YAAY,QAAQ,CAAC,QAAQ,YAAY,QAAQ,CAAC,SAAS;gBAC7D,MAAM,QAAQ,uBAAuB,KAAK,CACxC;gBAEF,IAAI,OAAO;oBACT,MAAM,GAAG,cAAc,OAAO,GAAG;oBAEjC,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;wBACxB,QAAQ,GAAG,CAAC,QAAQ;4BAClB,SAAS;4BACT,OAAO,IAAI;4BACX,WAAW;4BACX,YAAY;wBACd;oBACF;oBAEA,+CAA+C;oBAC/C,aAAa,KAAK,CAAC,KAAK,OAAO,CAAC,CAAC;wBAC/B,MAAM,YAAY,KAAK,IAAI;wBAC3B,IAAI,WAAW;4BACb,2BAA2B;4BAC3B,QAAQ,GAAG,CAAC,QAAS,KAAK,CAAC,GAAG,CAAC;wBACjC;oBACF;gBACF;gBAEA,yBAAyB;gBACzB;YACF,OAAO,IAAI,YAAY,QAAQ,CAAC,MAAM;gBAEpC;YACF,OAAO;gBAEL;YACF;QACF;QAEA,2CAA2C;QAC3C,IAAI,CAAC,eAAe,YAAY,UAAU,CAAC,OAAO;YAChD,IAAI,CAAC,YAAY,IAAI,CAAC,cAAc;gBAClC,eAAe,IAAI,CAAC;YACtB;YACA;QACF;QAEA,4BAA4B;QAC5B,IAAI,YAAY,IAAI,CAAC,cAAc;YACjC,IAAI;YAEJ,wEAAwE;YACxE,2DAA2D;YAC3D,IAAI,YAAY,KAAK,CAAC,kBAAkB,CAAC,YAAY,QAAQ,CAAC,SAAS;gBACrE,yBAAyB;gBACzB;YACF,OAEK,IAAK,QAAQ,YAAY,KAAK,CAAC,uBAAwB;gBAC1D,MAAM,GAAG,eAAe,cAAc,OAAO,GAAG;gBAEhD,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;oBACxB,QAAQ,GAAG,CAAC,QAAQ;wBAClB,SAAS;wBACT,OAAO,IAAI;wBACX,WAAW;wBACX,YAAY;oBACd;gBACF;gBAEA,MAAM,aAAa,QAAQ,GAAG,CAAC;gBAC/B,WAAW,OAAO,GAAG;gBAErB,aAAa,KAAK,CAAC,KAAK,OAAO,CAAC,CAAC;oBAC/B,MAAM,YAAY,KAAK,IAAI;oBAC3B,IAAI,WAAW;wBACb,2BAA2B;wBAC3B,WAAW,KAAK,CAAC,GAAG,CAAC;oBACvB;gBACF;YACF,OAEK,IAAK,QAAQ,YAAY,KAAK,CAAC,mBAAoB;gBACtD,MAAM,GAAG,cAAc,OAAO,GAAG;gBAEjC,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;oBACxB,QAAQ,GAAG,CAAC,QAAQ;wBAClB,SAAS;wBACT,OAAO,IAAI;wBACX,WAAW;wBACX,YAAY;oBACd;gBACF;gBAEA,aAAa,KAAK,CAAC,KAAK,OAAO,CAAC,CAAC;oBAC/B,MAAM,YAAY,KAAK,IAAI;oBAC3B,IAAI,WAAW;wBACb,2BAA2B;wBAC3B,QAAQ,GAAG,CAAC,QAAS,KAAK,CAAC,GAAG,CAAC;oBACjC;gBACF;YACF,OAEK,IAAK,QAAQ,YAAY,KAAK,CAAC,qBAAsB;gBACxD,MAAM,GAAG,eAAe,OAAO,GAAG;gBAElC,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;oBACxB,QAAQ,GAAG,CAAC,QAAQ;wBAClB,SAAS;wBACT,OAAO,IAAI;wBACX,WAAW;wBACX,YAAY;oBACd;gBACF;gBAEA,uDAAuD;gBACvD,IAAI,CAAC,QAAQ,GAAG,CAAC,QAAS,OAAO,EAAE;oBACjC,QAAQ,GAAG,CAAC,QAAS,OAAO,GAAG;gBACjC;YACF,OAEK,IAAK,QAAQ,YAAY,KAAK,CAAC,uBAAwB;gBAC1D,MAAM,GAAG,WAAW,OAAO,GAAG;gBAE9B,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;oBACxB,QAAQ,GAAG,CAAC,QAAQ;wBAClB,SAAS;wBACT,OAAO,IAAI;wBACX,WAAW;wBACX,YAAY;oBACd;gBACF;gBAEA,QAAQ,GAAG,CAAC,QAAS,SAAS,GAAG;YACnC,OAEK,IAAK,QAAQ,YAAY,KAAK,CAAC,wBAAyB;gBAC3D,MAAM,GAAG,OAAO,GAAG;gBAEnB,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;oBACxB,QAAQ,GAAG,CAAC,QAAQ;wBAClB,SAAS;wBACT,OAAO,IAAI;wBACX,WAAW;wBACX,YAAY;oBACd;gBACF;YACF;QACF,OAAO;YACL,eAAe,IAAI,CAAC;QACtB;IACF;IAEA,uBAAuB;IACvB,IAAI,SAAS;IAEb,4BAA4B;IAC5B,IAAI,gBAAgB;QAClB,UAAU;IACZ;IAEA,+DAA+D;IAC/D,MAAM,gBAAgB,MAAM,IAAI,CAAC,QAAQ,OAAO,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE;QAChE,MAAM,cAAc,EAAE,UAAU,CAAC,QAAQ,EAAE,UAAU,CAAC;QACtD,MAAM,cAAc,EAAE,UAAU,CAAC,QAAQ,EAAE,UAAU,CAAC;QAEtD,IAAI,eAAe,CAAC,aAAa,OAAO;QACxC,IAAI,CAAC,eAAe,aAAa,OAAO,CAAC;QACzC,OAAO,EAAE,aAAa,CAAC;IACzB;IAEA,6BAA6B;IAC7B,cAAc,OAAO,CAAC,CAAC,CAAC,QAAQ,KAAK;QACnC,IACE,KAAK,UAAU,IACf,CAAC,KAAK,OAAO,IACb,KAAK,KAAK,CAAC,IAAI,KAAK,KACpB,CAAC,KAAK,SAAS,EACf;YACA,UAAU,CAAC,QAAQ,EAAE,OAAO,GAAG,CAAC;QAClC,OAAO,IAAI,KAAK,SAAS,EAAE;YACzB,UAAU,CAAC,YAAY,EAAE,KAAK,SAAS,CAAC,OAAO,EAAE,OAAO,GAAG,CAAC;QAC9D,OAAO;YACL,MAAM,QAAkB,EAAE;YAE1B,IAAI,KAAK,OAAO,EAAE;gBAChB,MAAM,IAAI,CAAC,KAAK,OAAO;YACzB;YAEA,IAAI,KAAK,KAAK,CAAC,IAAI,GAAG,GAAG;gBACvB,MAAM,eAAe,MAAM,IAAI,CAAC,KAAK,KAAK,EAAE,IAAI,GAAG,IAAI,CAAC;gBACxD,MAAM,IAAI,CAAC,CAAC,EAAE,EAAE,aAAa,EAAE,CAAC;YAClC;YAEA,IAAI,MAAM,MAAM,GAAG,GAAG;gBACpB,UAAU,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,MAAM,OAAO,EAAE,OAAO,GAAG,CAAC;YAC3D;QACF;IACF;IAEA,kDAAkD;IAClD,IAAI,cAAc,MAAM,GAAG,GAAG;QAC5B,UAAU;IACZ;IAEA,2BAA2B;IAC3B,UAAU,eAAe,IAAI,CAAC;IAE9B,OAAO;AACT"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/code-block.tsx"],"sourcesContent":["\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Check, Copy } from \"lucide-react\";\nimport { useState, type ComponentType } from \"react\";\nimport type { SyntaxHighlighterProps } from \"react-syntax-highlighter\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport { vscDarkPlus } from \"react-syntax-highlighter/dist/esm/styles/prism\";\n\nconst PrismSyntaxHighlighter =\n  SyntaxHighlighter as unknown as ComponentType<SyntaxHighlighterProps>;\n\ntype CodeBlockProps = {\n  code: string;\n  language?: string;\n};\n\nexport function CodeBlock({ code, language = \"tsx\" }: CodeBlockProps) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(code || \"\");\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const displayCode =\n    code === \"dummy\"\n      ? `'use client'\n\nimport { motion } from 'framer-motion'\n\nexport function ScaleHoverButton() {\n  return (\n    <motion.button\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 0.95 }}\n      transition={{ type: 'spring', stiffness: 400, damping: 17 }}\n      className=\"rounded-lg bg-accent px-8 py-3 font-semibold text-white shadow-lg\"\n    >\n      BUY NOW\n    </motion.button>\n  )\n}`\n      : code || \"\";\n\n  return (\n    <div className=\"relative\">\n      <div className=\"rounded-lg border border-border bg-card\">\n        <div className=\"flex items-center justify-between border-b border-border px-4 py-2.5\">\n          <span className=\"text-xs font-medium text-muted-foreground\">\n            TypeScript + React\n          </span>\n          <button\n            onClick={handleCopy}\n            className=\"flex items-center gap-1.5 rounded border border-border bg-muted px-3 py-1.5 text-xs font-medium text-muted-foreground transition-colors hover:border-ring hover:text-foreground\"\n          >\n            <AnimatePresence mode=\"wait\">\n              {copied ? (\n                <motion.div\n                  key=\"check\"\n                  initial={{ scale: 0 }}\n                  animate={{ scale: 1 }}\n                  exit={{ scale: 0 }}\n                  className=\"flex items-center gap-1.5\"\n                >\n                  <Check className=\"h-3 w-3\" />\n                  Copied\n                </motion.div>\n              ) : (\n                <motion.div\n                  key=\"copy\"\n                  initial={{ scale: 0 }}\n                  animate={{ scale: 1 }}\n                  exit={{ scale: 0 }}\n                  className=\"flex items-center gap-1.5\"\n                >\n                  <Copy className=\"h-3 w-3\" />\n                  Copy\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </button>\n        </div>\n        <div className=\"overflow-x-auto bg-card\">\n          <PrismSyntaxHighlighter\n            language={language}\n            style={vscDarkPlus}\n            customStyle={{\n              margin: 0,\n              padding: \"1rem\",\n              fontSize: \"0.75rem\",\n              lineHeight: \"1.5\",\n              background: \"transparent\",\n            }}\n            codeTagProps={{\n              style: {\n                fontFamily: \"inherit\",\n              },\n            }}\n          >\n            {displayCode}\n          </PrismSyntaxHighlighter>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAAA;AACA;AAEA;AACA;;;AAPA;;;;;;AASA,MAAM,yBACJ,sNAAiB;AAOZ,SAAS,UAAU,EAAE,IAAI,EAAE,WAAW,KAAK,EAAkB;;IAClE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,aAAa;QACjB,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC,QAAQ;QAC5C,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;IACrC;IAEA,MAAM,cACJ,SAAS,UACL,CAAC;;;;;;;;;;;;;;;CAeR,CAAC,GACM,QAAQ;IAEd,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAK,WAAU;sCAA4C;;;;;;sCAG5D,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,+MAAe;gCAAC,MAAK;0CACnB,uBACC,6LAAC,uMAAM,CAAC,GAAG;oCAET,SAAS;wCAAE,OAAO;oCAAE;oCACpB,SAAS;wCAAE,OAAO;oCAAE;oCACpB,MAAM;wCAAE,OAAO;oCAAE;oCACjB,WAAU;;sDAEV,6LAAC,gNAAK;4CAAC,WAAU;;;;;;wCAAY;;mCANzB;;;;yDAUN,6LAAC,uMAAM,CAAC,GAAG;oCAET,SAAS;wCAAE,OAAO;oCAAE;oCACpB,SAAS;wCAAE,OAAO;oCAAE;oCACpB,MAAM;wCAAE,OAAO;oCAAE;oCACjB,WAAU;;sDAEV,6LAAC,6MAAI;4CAAC,WAAU;;;;;;wCAAY;;mCANxB;;;;;;;;;;;;;;;;;;;;;8BAad,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,UAAU;wBACV,OAAO,mQAAW;wBAClB,aAAa;4BACX,QAAQ;4BACR,SAAS;4BACT,UAAU;4BACV,YAAY;4BACZ,YAAY;wBACd;wBACA,cAAc;4BACZ,OAAO;gCACL,YAAY;4BACd;wBACF;kCAEC;;;;;;;;;;;;;;;;;;;;;;AAMb;GA1FgB;KAAA"}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder-code-view.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@uitripled/ui/components/ui/dialog\";\nimport { Input } from \"@uitripled/ui/components/ui/input\";\nimport { Label } from \"@uitripled/ui/components/ui/label\";\nimport { mergeComponentImports } from \"@/lib/merge-imports\";\nimport type { BuilderComponent, BuilderProjectPage } from \"@uitripled/shared/builder\";\nimport { motion } from \"framer-motion\";\nimport {\n  Check,\n  ChevronDown,\n  ChevronUp,\n  Copy,\n  Download,\n  Eye,\n  Loader2,\n  Save,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { CodeBlock } from \"./code-block\";\nimport { useUILibrary } from \"@uitripled/ui/components/ui-library-provider\";\n\ntype BuilderCodeViewProps = {\n  pages: BuilderProjectPage[];\n  activePageId: string | null;\n};\n\nconst escapeForJSXText = (value: string) =>\n  value.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n\nconst replaceNextOccurrence = (\n  source: string,\n  search: string,\n  replacement: string\n) => {\n  if (!search) return source;\n  const index = source.indexOf(search);\n  if (index === -1) return source;\n  return `${source.slice(0, index)}${replacement}${source.slice(index + search.length)}`;\n};\n\nconst applyTextOverrides = (\n  code: string,\n  textContent?: BuilderComponent[\"textContent\"]\n) => {\n  if (!textContent) return code;\n\n  const entries = Object.entries(textContent)\n    .map(([key, content]) => {\n      const parts = key.split(\"-\");\n      const index = Number(parts[parts.length - 1]);\n\n      return {\n        content,\n        index: Number.isNaN(index) ? 0 : index,\n      };\n    })\n    .sort((a, b) => a.index - b.index);\n\n  return entries.reduce((acc, { content: { original, value } }) => {\n    if (!original) return acc;\n    if (value === undefined || value === original) return acc;\n\n    return replaceNextOccurrence(acc, original, escapeForJSXText(value));\n  }, code);\n};\n\nconst escapeForTemplateLiteral = (value: string) =>\n  value.replace(/\\\\/g, \"\\\\\").replace(/`/g, \"\\`\").replace(/\\$/g, \"\\$\");\n\ntype PageArtifact = {\n  id: string;\n  name: string;\n  slug: string;\n  code: string;\n  componentCount: number;\n};\n\nconst slugifyName = (value: string) =>\n  value\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\")\n    .slice(0, 48);\n\nconst buildPageCode = async (\n  currentPage: BuilderProjectPage,\n  allPages: BuilderProjectPage[],\n  selectedLibrary: string = \"shadcnui\"\n): Promise<string> => {\n  const components = currentPage.components;\n\n  const componentUsages: string[] = [];\n  const allImports: string[] = [];\n  const componentDefinitions: string[] = [];\n\n  for (const component of components) {\n    let animationCode = component.animation.code;\n\n    // If code is not available, fetch it from the API\n    if (!animationCode && component.animation.id) {\n      try {\n        // Try library-specific variant first (e.g., detail-task-card-shadcnui)\n        const libraryId = `${component.animation.id}-${selectedLibrary}`;\n        let response = await fetch(`/api/registry/${libraryId}`);\n\n        // Fallback to base ID if library-specific variant doesn't exist\n        if (!response.ok) {\n          response = await fetch(`/api/registry/${component.animation.id}`);\n        }\n\n        if (response.ok) {\n          const data = await response.json();\n          // The API returns files array with content property\n          animationCode = data.files?.[0]?.content || data.code;\n        } else {\n          console.warn(\n            `Failed to load code for component ${component.animation.id}: ${response.status}`\n          );\n          continue;\n        }\n      } catch (error) {\n        console.error(\n          `Error loading code for component ${component.animation.id}:`,\n          error\n        );\n        continue;\n      }\n    }\n\n    if (!animationCode) {\n      console.warn(`Component ${component.animation.id} has no code available`);\n      continue;\n    }\n    const codeWithOverrides = applyTextOverrides(\n      animationCode,\n      component.textContent\n    );\n\n    const functionMatch = codeWithOverrides.match(\n      /export\\s+(?:function|const)\\s+(\\w+)/\n    );\n    const componentFunctionName = functionMatch\n      ? functionMatch[1]\n      : component.animation.name.replace(/\\s+/g, \"\");\n\n    componentUsages.push(`        {/* ${component.animation.name} */}\n        <section>\n          <${componentFunctionName} />\n        </section>`);\n\n    const lines = codeWithOverrides.split(\"\\n\");\n\n    const componentLines: string[] = [];\n    let inImportSection = true;\n    let inMultilineImport = false;\n    let multilineImportBuffer: string[] = [];\n\n    for (const line of lines) {\n      const trimmedLine = line.trim();\n\n      if (/^(['\"])use client\\1;?\\s*(\\/\\/.*)?$/.test(trimmedLine)) {\n        continue;\n      }\n\n      if (inImportSection) {\n        if (inMultilineImport) {\n          multilineImportBuffer.push(line);\n          if (trimmedLine.includes(\"}\") && trimmedLine.includes(\"from\")) {\n            allImports.push(multilineImportBuffer.join(\"\\n\"));\n            multilineImportBuffer = [];\n            inMultilineImport = false;\n          }\n          continue;\n        }\n\n        if (trimmedLine.startsWith(\"import \")) {\n          if (\n            trimmedLine.match(/^import\\s*{/) &&\n            !trimmedLine.includes(\"from\")\n          ) {\n            inMultilineImport = true;\n            multilineImportBuffer.push(line);\n          } else {\n            allImports.push(line);\n          }\n          continue;\n        } else if (trimmedLine === \"\" || trimmedLine.startsWith(\"//\")) {\n          continue;\n        } else {\n          inImportSection = false;\n        }\n      }\n\n      if (!inImportSection) {\n        if (/^(['\"])use client\\1;?\\s*(\\/\\/.*)?$/.test(trimmedLine)) {\n          continue;\n        }\n        componentLines.push(line);\n      }\n    }\n\n    const componentCode = componentLines\n      .join(\"\\n\")\n      .replace(/^export\\s+(?:function|const)\\s+/m, \"function \")\n      .trim();\n\n    if (componentCode.length > 0) {\n      componentDefinitions.push(\n        `// ${component.animation.name}\\n${componentCode}`\n      );\n    }\n  }\n\n  const mainContent =\n    componentUsages.length > 0\n      ? componentUsages.join(\"\\n\\n\")\n      : `        <div className=\"rounded-lg border border-dashed border-border/60 p-12 text-center text-muted-foreground\">\n          Add blocks from the builder sidebar to populate this page.\n        </div>`;\n\n  const importsCode =\n    allImports.length > 0\n      ? `'use client'\\n\\n${allImports.join(\"\\n\")}`\n      : `'use client'`;\n\n  const pageTemplate = `\n\n${componentDefinitions.join(componentDefinitions.length > 0 ? \"\\n\\n\" : \"\")}\n\nexport default function Page() {\n  return (\n    <div className=\"container mx-auto px-4 py-12 md:px-6 lg:px-8\">\n      <div className=\"mx-auto max-w-6xl space-y-12\">\n${mainContent}\n      </div>\n    </div>\n  )\n}\n`;\n\n  const mergedImports = mergeComponentImports(importsCode);\n\n  return mergedImports + pageTemplate;\n};\n\nconst buildProjectLayout = (\n  allPages: BuilderProjectPage[],\n  projectName: string\n): string => {\n  const brandTitle = allPages[0]?.name ?? projectName;\n  const brandLabel = escapeForTemplateLiteral(brandTitle);\n  const navLinks = allPages.map((page, index) => ({\n    href: index === 0 ? \"/\" : `/${page.slug}`,\n    label: escapeForTemplateLiteral(page.name),\n  }));\n  const currentYear = new Date().getFullYear();\n\n  const navMarkup =\n    navLinks.length > 0\n      ? navLinks\n          .map(\n            (link) => `            <Link\n              href=\"${link.href}\"\n              className=\"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${link.label}\n            </Link>`\n          )\n          .join(\"\\n\")\n      : `            <Link\n              href=\"/\"\n              className=\"text-sm font-medium text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${brandLabel}\n            </Link>`;\n\n  const footerMarkup =\n    navLinks.length > 0\n      ? navLinks\n          .map(\n            (link) => `            <Link\n              href=\"${link.href}\"\n              className=\"text-xs text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${link.label}\n            </Link>`\n          )\n          .join(\"\\n\")\n      : `            <Link\n              href=\"/\"\n              className=\"text-xs text-muted-foreground transition-colors hover:text-foreground\"\n            >\n              ${brandLabel}\n            </Link>`;\n\n  return `import './globals.css'\nimport type { Metadata } from 'next'\nimport type { ReactNode } from 'react'\nimport Link from 'next/link'\n\nexport const metadata: Metadata = {\n  title: '${brandLabel} - Generated Experience',\n  description: 'Generated with the UI Motion Builder',\n}\n\nexport default function RootLayout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\" className=\"scroll-smooth\">\n      <body className=\"flex min-h-screen flex-col bg-background text-foreground antialiased\">\n        <header className=\"border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n          <div className=\"container mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8\">\n            <Link href=\"/\" className=\"text-base font-semibold tracking-tight\">\n              ${brandLabel}\n            </Link>\n            <nav className=\"flex items-center gap-6\">\n${navMarkup}\n            </nav>\n          </div>\n        </header>\n        <main className=\"flex-1\">\n          {children}\n        </main>\n        <footer className=\"border-t border-border bg-muted/40\">\n          <div className=\"container mx-auto flex flex-col gap-2 px-4 py-6 text-xs text-muted-foreground md:flex-row md:items-center md:justify-between md:px-6 lg:px-8\">\n            <span>&copy; ${currentYear} ${brandLabel}. All rights reserved.</span>\n            <nav className=\"flex flex-wrap items-center gap-4\">\n${footerMarkup}\n            </nav>\n          </div>\n        </footer>\n      </body>\n    </html>\n  )\n}\n`;\n};\n\nexport function BuilderCodeView({ pages, activePageId }: BuilderCodeViewProps) {\n  const [copied, setCopied] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [saveDialogOpen, setSaveDialogOpen] = useState(false);\n  const [projectName, setProjectName] = useState(\"\");\n  const [saved, setSaved] = useState(false);\n  const [pendingAction, setPendingAction] = useState<\n    \"preview\" | \"deploy\" | null\n  >(null);\n  const [exporting, setExporting] = useState(false);\n  const [exported, setExported] = useState(false);\n  const [pageArtifacts, setPageArtifacts] = useState<PageArtifact[]>([]);\n  const [loadingCode, setLoadingCode] = useState(false);\n  const router = useRouter();\n  const { selectedLibrary } = useUILibrary();\n\n  const totalComponentCount = useMemo(\n    () => pages.reduce((sum, page) => sum + page.components.length, 0),\n    [pages]\n  );\n\n  // Load code for all pages asynchronously\n  useEffect(() => {\n    let cancelled = false;\n\n    async function loadPageCodes() {\n      setLoadingCode(true);\n      try {\n        const artifacts = await Promise.all(\n          pages.map(async (page) => ({\n            id: page.id,\n            name: page.name,\n            slug: page.slug,\n            code: await buildPageCode(page, pages, selectedLibrary),\n            componentCount: page.components.length,\n          }))\n        );\n\n        if (!cancelled) {\n          setPageArtifacts(artifacts);\n        }\n      } catch (error) {\n        console.error(\"Failed to load page codes:\", error);\n        if (!cancelled) {\n          setPageArtifacts([]);\n        }\n      } finally {\n        if (!cancelled) {\n          setLoadingCode(false);\n        }\n      }\n    }\n\n    loadPageCodes();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [pages, selectedLibrary]);\n\n  const pageCodeMap = useMemo(() => {\n    const map: Record<string, string> = {};\n    pageArtifacts.forEach((artifact) => {\n      map[artifact.id] = artifact.code;\n    });\n    return map;\n  }, [pageArtifacts]);\n\n  const activeArtifact = useMemo(() => {\n    if (pageArtifacts.length === 0) {\n      return null;\n    }\n\n    if (activePageId) {\n      const match = pageArtifacts.find(\n        (artifact) => artifact.id === activePageId\n      );\n      if (match) {\n        return match;\n      }\n    }\n\n    return pageArtifacts[0];\n  }, [pageArtifacts, activePageId]);\n\n  const projectSignature = useMemo(\n    () =>\n      JSON.stringify(\n        pages.map((page) => ({\n          components: page.components.map((component) => ({\n            animationId: component.animationId,\n            textContent: component.textContent ?? {},\n          })),\n        }))\n      ),\n    [pages]\n  );\n\n  const handleCopy = async () => {\n    if (!activeArtifact) return;\n\n    await navigator.clipboard.writeText(activeArtifact.code);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const handleSave = useCallback(async () => {\n    const normalizedName = projectName.trim();\n    if (!normalizedName || totalComponentCount === 0) return;\n\n    const existingProjects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    const existingNormalizedEntry = existingProjects[normalizedName];\n\n    let finalProjectName = normalizedName;\n    if (!existingNormalizedEntry) {\n      const chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n      const baseSlug = normalizedName\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, \"-\")\n        .replace(/^-+|-+$/g, \"\")\n        .slice(0, 40);\n\n      const uniqueId =\n        typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\"\n          ? crypto.randomUUID().replace(/-/g, \"\").slice(0, 8)\n          : Array.from({ length: 8 }, () =>\n              chars.charAt(Math.floor(Math.random() * chars.length))\n            ).join(\"\");\n\n      finalProjectName = baseSlug\n        ? `${baseSlug}-${uniqueId}`\n        : `project-${uniqueId}`;\n    }\n\n    const previousProjectData =\n      existingProjects[finalProjectName] || existingNormalizedEntry || null;\n\n    if (existingNormalizedEntry && normalizedName !== finalProjectName) {\n      delete existingProjects[normalizedName];\n    }\n\n    // Ensure all page codes are loaded before saving\n    const serializedPages = await Promise.all(\n      pages.map(async (page) => ({\n        id: page.id,\n        name: page.name,\n        slug: page.slug,\n        components: page.components.map((component) => ({\n          id: component.id,\n          animationId: component.animationId,\n          textContent: component.textContent ?? {},\n        })),\n        code: pageCodeMap[page.id] || (await buildPageCode(page, pages, selectedLibrary)),\n      }))\n    );\n\n    const fallbackPage: BuilderProjectPage = {\n      id: \"page-fallback\",\n      name: \"Home\",\n      slug: \"home\",\n      components: [],\n    };\n    const fallbackCode = await buildPageCode(fallbackPage, [fallbackPage], selectedLibrary);\n\n    // Generate a short unique ID (5 characters) for the project if it doesn't exist\n    const generateShortId = () => {\n      // Use crypto for better randomness if available\n      if (\n        typeof crypto !== \"undefined\" &&\n        typeof crypto.getRandomValues === \"function\"\n      ) {\n        const array = new Uint8Array(4);\n        crypto.getRandomValues(array);\n        return Array.from(array, (byte) => byte.toString(36).padStart(2, \"0\"))\n          .join(\"\")\n          .slice(0, 5);\n      }\n      // Fallback: timestamp + random\n      return (\n        Date.now().toString(36) + Math.random().toString(36).slice(2)\n      ).slice(-5);\n    };\n\n    const projectUuid = previousProjectData?.uuid ?? generateShortId();\n\n    // Use short ID as deployment slug to ensure consistency\n    const deploymentSlug = previousProjectData?.deploymentSlug ?? projectUuid;\n\n    const projectData = {\n      name: finalProjectName,\n      uuid: projectUuid,\n      deploymentSlug: deploymentSlug,\n      pages: serializedPages,\n      entryPageId: serializedPages[0]?.id ?? null,\n      components: serializedPages[0]?.components ?? [],\n      code: serializedPages[0]?.code ?? fallbackCode,\n      savedAt: new Date().toISOString(),\n      deploymentId: previousProjectData?.deploymentId ?? deploymentSlug,\n      deploymentUrl: previousProjectData?.deploymentUrl,\n    };\n\n    existingProjects[finalProjectName] = projectData;\n    localStorage.setItem(\"builderProjects\", JSON.stringify(existingProjects));\n\n    setSaved(true);\n    setTimeout(() => setSaved(false), 2000);\n    setSaveDialogOpen(false);\n\n    const action = pendingAction;\n    setPendingAction(null);\n\n    if (action === \"preview\") {\n      router.push(`/preview/${encodeURIComponent(finalProjectName)}`);\n    } else if (action === \"deploy\") {\n      router.push(`/deploy?project=${encodeURIComponent(finalProjectName)}`);\n    }\n\n    setProjectName(\"\");\n  }, [\n    pageCodeMap,\n    pages,\n    pendingAction,\n    projectName,\n    router,\n    totalComponentCount,\n  ]);\n\n  const findMatchingProject = useCallback(() => {\n    const existingProjects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    return Object.values(existingProjects).find((project: any) => {\n      const savedPages =\n        Array.isArray(project.pages) && project.pages.length > 0\n          ? project.pages\n          : [\n              {\n                components: project.components ?? [],\n              },\n            ];\n\n      const signature = JSON.stringify(\n        savedPages.map((page: any) => ({\n          components: (page.components ?? []).map((component: any) => ({\n            animationId: component.animationId,\n            textContent: component.textContent ?? {},\n          })),\n        }))\n      );\n\n      return signature === projectSignature;\n    }) as { name: string } | undefined;\n  }, [projectSignature]);\n\n  const handlePreview = () => {\n    if (totalComponentCount === 0) return;\n\n    const existingProject = findMatchingProject();\n\n    if (existingProject) {\n      router.push(`/preview/${encodeURIComponent(existingProject.name)}`);\n    } else {\n      openSaveDialog(\"preview\");\n    }\n  };\n\n  const handleDeploy = () => {\n    if (totalComponentCount === 0) return;\n\n    const existingProject = findMatchingProject();\n\n    if (existingProject) {\n      router.push(\n        `/deploy?project=${encodeURIComponent(existingProject.name)}`\n      );\n    } else {\n      openSaveDialog(\"deploy\");\n    }\n  };\n\n  const handleExportProject = useCallback(async () => {\n    if (totalComponentCount === 0 || exporting) return;\n\n    setExporting(true);\n    setExported(false);\n\n    try {\n      const matchingProject = findMatchingProject();\n      const fallbackName = pages[0]?.name?.trim() ?? \"builder-project\";\n      const projectNameForExport = matchingProject?.name?.trim().length\n        ? matchingProject.name\n        : fallbackName.length > 0\n          ? fallbackName\n          : \"builder-project\";\n\n      const pageFiles = pageArtifacts.map((artifact, index) => {\n        const sanitizedSlug =\n          artifact.slug && artifact.slug.length > 0\n            ? artifact.slug\n            : slugifyName(artifact.name) || `page-${index + 1}`;\n\n        const path =\n          index === 0 ? \"app/page.tsx\" : `app/${sanitizedSlug}/page.tsx`;\n\n        return {\n          path,\n          code: artifact.code,\n        };\n      });\n\n      // Generate custom layout with nav/footer\n      const layoutCode = buildProjectLayout(pages, projectNameForExport);\n\n      const response = await fetch(\"/api/export\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          projectName: projectNameForExport,\n          pages: pageFiles,\n          layout: layoutCode,\n        }),\n      });\n\n      if (!response.ok) {\n        let errorMessage = `Export failed with status ${response.status}`;\n        try {\n          const errorBody = await response.json();\n          if (typeof errorBody?.error === \"string\") {\n            errorMessage = errorBody.error;\n          }\n        } catch {\n          // ignore parsing errors\n        }\n        throw new Error(errorMessage);\n      }\n\n      const blob = await response.blob();\n      const downloadUrl = URL.createObjectURL(blob);\n      const filenameBase =\n        slugifyName(projectNameForExport) || \"builder-project\";\n\n      const link = document.createElement(\"a\");\n      link.href = downloadUrl;\n      link.download = `${filenameBase}.zip`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      setTimeout(() => {\n        URL.revokeObjectURL(downloadUrl);\n      }, 1000);\n\n      setExported(true);\n      setTimeout(() => setExported(false), 2000);\n    } catch (error) {\n      console.error(\"Failed to export project zip\", error);\n      window.alert(\"Failed to export project. Please try again.\");\n    } finally {\n      setExporting(false);\n    }\n  }, [\n    exporting,\n    findMatchingProject,\n    pageArtifacts,\n    pages,\n    totalComponentCount,\n  ]);\n\n  const saveButtonLabel =\n    pendingAction === \"preview\"\n      ? \"Save & Preview\"\n      : pendingAction === \"deploy\"\n        ? \"Save & Deploy\"\n        : \"Save Project\";\n\n  const encodedProjectName = projectName\n    ? encodeURIComponent(projectName)\n    : \"project-name\";\n\n  const openSaveDialog = (action: \"preview\" | \"deploy\" | null = null) => {\n    const existingProject = findMatchingProject();\n\n    if (existingProject) {\n      setProjectName(existingProject.name);\n    } else if (!projectName.trim()) {\n      const timestamp = new Date().toISOString().split(\"T\")[0];\n      setProjectName(`project-${timestamp}`);\n    }\n\n    setPendingAction(action);\n    setSaveDialogOpen(true);\n  };\n\n  const [displayedCode, setDisplayedCode] = useState<string>(\"\");\n\n  useEffect(() => {\n    async function loadDisplayedCode() {\n      if (activeArtifact) {\n        setDisplayedCode(activeArtifact.code);\n      } else {\n        const fallbackPage: BuilderProjectPage = {\n          id: \"page-preview-fallback\",\n          name: \"Home\",\n          slug: \"home\",\n          components: [],\n        };\n        const code = await buildPageCode(fallbackPage, [fallbackPage], selectedLibrary);\n        setDisplayedCode(code);\n      }\n    }\n\n    loadDisplayedCode();\n  }, [activeArtifact, selectedLibrary]);\n\n  return (\n    <>\n      <motion.div\n        initial={false}\n        animate={{ height: isExpanded ? \"auto\" : \"60px\" }}\n        className=\"border-t border-border bg-card\"\n      >\n        <div className=\"grid grid-cols-1 space-y-5 md:flex items-center justify-between border-b border-border px-6 py-3\">\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <h3 className=\"font-semibold\">Generated Code</h3>\n            <span className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\">\n              {pages.length} {pages.length === 1 ? \"page\" : \"pages\"}\n            </span>\n            <span className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\">\n              {totalComponentCount}{\" \"}\n              {totalComponentCount === 1 ? \"component\" : \"components\"}\n            </span>\n            {activeArtifact && (\n              <span className=\"text-xs text-muted-foreground\">\n                Showing: {activeArtifact.name}\n              </span>\n            )}\n          </div>\n          <div className=\"grid grid-cols-2 md:flex items-center gap-2\">\n            <button\n              onClick={() => openSaveDialog()}\n              disabled={totalComponentCount === 0}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {saved ? (\n                <>\n                  <Check className=\"h-4 w-4\" />\n                  Saved!\n                </>\n              ) : (\n                <>\n                  <Save className=\"h-4 w-4\" />\n                  Save\n                </>\n              )}\n            </button>\n            <button\n              onClick={handlePreview}\n              disabled={totalComponentCount === 0}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              <Eye className=\"h-4 w-4\" />\n              Preview\n            </button>\n            {/* <button\n              onClick={handleDeploy}\n              disabled={totalComponentCount === 0}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              <Rocket className=\"h-4 w-4\" />\n              Deploy\n            </button> */}\n            <button\n              onClick={handleExportProject}\n              disabled={totalComponentCount === 0 || exporting}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {exporting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  Exporting...\n                </>\n              ) : exported ? (\n                <>\n                  <Check className=\"h-4 w-4\" />\n                  Exported!\n                </>\n              ) : (\n                <>\n                  <Download className=\"h-4 w-4\" />\n                  Export\n                </>\n              )}\n            </button>\n            <button\n              onClick={handleCopy}\n              disabled={!activeArtifact}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {copied ? (\n                <>\n                  <Check className=\"h-4 w-4\" />\n                  Copied!\n                </>\n              ) : (\n                <>\n                  <Copy className=\"h-4 w-4\" />\n                  Copy\n                </>\n              )}\n            </button>\n            <button\n              onClick={() => setIsExpanded(!isExpanded)}\n              className=\"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-1.5 text-sm transition-colors hover:bg-accent\"\n            >\n              {isExpanded ? (\n                <>\n                  <ChevronDown className=\"h-4 w-4\" />\n                  Collapse\n                </>\n              ) : (\n                <>\n                  <ChevronUp className=\"h-4 w-4\" />\n                  Expand\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"max-h-[500px] overflow-auto\"\n          >\n            {loadingCode || !displayedCode ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"flex flex-col items-center gap-3\">\n                  <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Generating code...\n                  </p>\n                </div>\n              </div>\n            ) : (\n              <CodeBlock code={displayedCode} language=\"tsx\" />\n            )}\n          </motion.div>\n        )}\n      </motion.div>\n\n      <Dialog\n        open={saveDialogOpen}\n        onOpenChange={(open: boolean) => {\n          setSaveDialogOpen(open);\n          if (!open) {\n            setPendingAction(null);\n          }\n        }}\n      >\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Save Project</DialogTitle>\n            <DialogDescription>\n              Enter a name for your project. A unique 5-character ID will be\n              added automatically to prevent conflicts.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"rounded-md border border-amber-200 bg-amber-50 p-3 text-sm text-amber-900 dark:border-amber-900/50 dark:bg-amber-950/30 dark:text-amber-200\">\n            <p className=\"font-medium\">\n               Projects are saved in browser localStorage\n            </p>\n            <p className=\"mt-1 text-xs opacity-90\">\n              Your projects will be lost if you clear browser data, use\n              incognito mode, or switch browsers. Export your code before\n              clearing cookies.\n            </p>\n          </div>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid gap-2\">\n              <Label htmlFor=\"project-name\">Project Name</Label>\n              <Input\n                id=\"project-name\"\n                placeholder=\"my-awesome-project\"\n                value={projectName}\n                onChange={(e) => setProjectName(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    e.preventDefault();\n                    handleSave();\n                  }\n                }}\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Preview URL: /preview/{projectName || \"project-name\"}\n                <br />\n                Deploy URL: /deploy?project={encodedProjectName}\n              </p>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setSaveDialogOpen(false);\n                setPendingAction(null);\n              }}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSave}\n              disabled={!projectName.trim() || totalComponentCount === 0}\n            >\n              {saveButtonLabel}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1809, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/lib/file-reader.ts"],"sourcesContent":["// lib/get-component-code.ts\n\"use server\";\n\nimport { readFileSync } from \"fs\";\nimport { join } from \"path\";\n\n/**\n * Reads a component file and returns its source code as a string\n * @param filePath - The path to the file (supports @/ alias or relative/absolute paths)\n * @returns The file content as a string\n * @throws Error if the file cannot be read\n */\nexport async function getComponentCode(filePath: string): Promise<string> {\n  try {\n    // Resolve aliases\n    let resolvedPath = filePath;\n    if (filePath.startsWith(\"@/\")) {\n      resolvedPath = join(process.cwd(), filePath.replace(\"@/\", \"\"));\n    } else if (filePath.startsWith(\"@uitripled/ui/\")) {\n      resolvedPath = join(\n        process.cwd(),\n        \"../../packages/ui/src\",\n        filePath.replace(\"@uitripled/ui/\", \"\")\n      );\n    } else if (filePath.startsWith(\"@uitripled/shared/\")) {\n      resolvedPath = join(\n        process.cwd(),\n        \"../../packages/shared/src\",\n        filePath.replace(\"@uitripled/shared/\", \"\")\n      );\n    } else if (filePath.startsWith(\"@uitripled/registry/\")) {\n      resolvedPath = join(\n        process.cwd(),\n        \"../../packages/registry/src\",\n        filePath.replace(\"@uitripled/registry/\", \"\")\n      );\n    } else if (!filePath.startsWith(\"/\")) {\n      resolvedPath = join(process.cwd(), filePath);\n    }\n\n    const absolutePath = resolvedPath;\n\n    const content = readFileSync(absolutePath, \"utf-8\");\n    return content;\n  } catch (error) {\n    throw new Error(\n      `Failed to read file at ${filePath}: ${error instanceof Error ? error.message : String(error)}`\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAYsB,mBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1824, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/lib/components-registry.tsx"],"sourcesContent":["import { componentsRegistry } from \"@uitripled/registry\";\nimport { Component, ComponentCategory } from \"@uitripled/shared\";\nimport { getComponentCode } from \"./file-reader\";\n\nexport { componentsRegistry };\n\nexport function getComponentById(id: string): Component | undefined {\n  return componentsRegistry.find((component) => component.id === id);\n}\n\nexport function getAnimationsByCategory(\n  category: ComponentCategory\n): Component[] {\n  return componentsRegistry.filter(\n    (component) => component.category === category\n  );\n}\n\nexport function searchComponents(query: string): Component[] {\n  const lowerQuery = query.toLowerCase();\n  return componentsRegistry.filter(\n    (component) =>\n      component.name.toLowerCase().includes(lowerQuery) ||\n      component.description.toLowerCase().includes(lowerQuery) ||\n      component.tags.some((tag: string) => tag.toLowerCase().includes(lowerQuery))\n  );\n}\n\n/**\n * Loads component code on demand\n * This is a Server Function and should be called from Server Components or Server Actions\n */\nexport async function loadComponentCode(component: Component): Promise<string> {\n  if (component.code) {\n    return component.code;\n  }\n  if (component.codePath) {\n    return await getComponentCode(component.codePath);\n  }\n  throw new Error(`No code path found for component ${component.id}`);\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAEA;;;;AAIO,SAAS,iBAAiB,EAAU;IACzC,OAAO,iKAAkB,CAAC,IAAI,CAAC,CAAC,YAAc,UAAU,EAAE,KAAK;AACjE;AAEO,SAAS,wBACd,QAA2B;IAE3B,OAAO,iKAAkB,CAAC,MAAM,CAC9B,CAAC,YAAc,UAAU,QAAQ,KAAK;AAE1C;AAEO,SAAS,iBAAiB,KAAa;IAC5C,MAAM,aAAa,MAAM,WAAW;IACpC,OAAO,iKAAkB,CAAC,MAAM,CAC9B,CAAC,YACC,UAAU,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,eACtC,UAAU,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,eAC7C,UAAU,IAAI,CAAC,IAAI,CAAC,CAAC,MAAgB,IAAI,WAAW,GAAG,QAAQ,CAAC;AAEtE;AAMO,eAAe,kBAAkB,SAAoB;IAC1D,IAAI,UAAU,IAAI,EAAE;QAClB,OAAO,UAAU,IAAI;IACvB;IACA,IAAI,UAAU,QAAQ,EAAE;QACtB,OAAO,MAAM,IAAA,iLAAgB,EAAC,UAAU,QAAQ;IAClD;IACA,MAAM,IAAI,MAAM,CAAC,iCAAiC,EAAE,UAAU,EAAE,EAAE;AACpE"}},
    {"offset": {"line": 1866, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 1884, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder-sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useDraggable } from \"@dnd-kit/core\";\nimport { motion } from \"framer-motion\";\nimport { Search } from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\n\nimport { componentsRegistry } from \"@/lib/components-registry\";\nimport { cn } from \"@/lib/utils\";\nimport { categoryNames } from \"@uitripled/shared\";\n\ntype ComponentItem = (typeof componentsRegistry)[number];\n\ntype BuilderSidebarProps = {\n  className?: string;\n  onSelectComponent?: (componentId: string) => void;\n  allowDrag?: boolean;\n};\n\nfunction DraggableComponent({ component }: { component: ComponentItem }) {\n  const { attributes, listeners, setNodeRef, transform, isDragging } =\n    useDraggable({\n      id: component.id,\n    });\n\n  const style = transform\n    ? {\n        transform: `translate3d(${transform.x}px, ${transform.y}px, 0)`,\n      }\n    : undefined;\n\n  return (\n    <motion.div\n      ref={setNodeRef}\n      style={style}\n      {...listeners}\n      {...attributes}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      className={cn(\n        \"cursor-grab rounded-lg border border-border bg-card p-3 transition-colors hover:border-primary hover:bg-accent/5 active:cursor-grabbing\",\n        isDragging && \"opacity-50\"\n      )}\n    >\n      <div className=\"text-sm font-medium\">{component.name}</div>\n      <div className=\"mt-1 text-xs text-muted-foreground\">\n        {component.description}\n      </div>\n      <div className=\"mt-2 flex flex-wrap gap-1\">\n        {component.tags.slice(0, 3).map((tag: string) => (\n          <span\n            key={tag}\n            className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\"\n          >\n            {tag}\n          </span>\n        ))}\n      </div>\n    </motion.div>\n  );\n}\n\nfunction SelectableComponent({\n  component,\n  onSelect,\n}: {\n  component: ComponentItem;\n  onSelect?: (componentId: string) => void;\n}) {\n  return (\n    <motion.button\n      type=\"button\"\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onClick={() => onSelect?.(component.id)}\n      className=\"w-full rounded-lg border border-border bg-card p-3 text-left transition-colors hover:border-primary hover:bg-accent/5 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30\"\n    >\n      <div className=\"text-sm font-medium\">{component.name}</div>\n      <div className=\"mt-1 text-xs text-muted-foreground\">\n        {component.description}\n      </div>\n      <div className=\"mt-2 flex flex-wrap gap-1\">\n        {component.tags.slice(0, 3).map((tag: string) => (\n          <span\n            key={tag}\n            className=\"rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary\"\n          >\n            {tag}\n          </span>\n        ))}\n      </div>\n    </motion.button>\n  );\n}\n\nexport function BuilderSidebar({\n  className,\n  onSelectComponent,\n  allowDrag = true,\n}: BuilderSidebarProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const filteredAnimations = useMemo(() => {\n    const query = searchQuery.trim().toLowerCase();\n\n    return componentsRegistry\n      .filter(\n        (component) =>\n          component.display !== false &&\n          (component.category === \"blocks\" || component.category === \"resumes\")\n      )\n      .filter((component) => {\n        if (!query) return true;\n        return (\n          component.name.toLowerCase().includes(query) ||\n          component.description.toLowerCase().includes(query) ||\n          component.tags.some((tag: string) => tag.toLowerCase().includes(query))\n        );\n      });\n  }, [searchQuery]);\n\n  return (\n    <div className={cn(\"flex h-full flex-col bg-card\", className)}>\n      <div className=\"border-b border-border p-4\">\n        <h2 className=\"mb-4 text-lg font-semibold\">Component Library</h2>\n        <div className=\"relative mb-4\">\n          <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search components...\"\n            value={searchQuery}\n            onChange={(event) => setSearchQuery(event.target.value)}\n            className=\"w-full rounded-lg border border-border bg-background pl-10 pr-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20\"\n          />\n        </div>\n        <div className=\"mb-2 text-xs font-medium text-muted-foreground\">\n          Available Components\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          <span className=\"rounded-full bg-primary px-3 py-1 text-xs font-medium text-primary-foreground\">\n            {categoryNames.blocks}\n          </span>\n          <span className=\"rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground\">\n            Only blocks/resumes allowed\n          </span>\n        </div>\n        {!allowDrag && (\n          <p className=\"mt-3 text-xs text-muted-foreground\">\n            Tap a block to add it to your page.\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {filteredAnimations.length === 0 ? (\n          <div className=\"py-8 text-center text-sm text-muted-foreground\">\n            No components found\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {filteredAnimations.map((component) =>\n              allowDrag ? (\n                <DraggableComponent key={component.id} component={component} />\n              ) : (\n                <SelectableComponent\n                  key={component.id}\n                  component={component}\n                  onSelect={onSelectComponent}\n                />\n              )\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2186, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder/builder-header.tsx"],"sourcesContent":["\"use client\";\n\nimport { BuilderSidebar } from \"@/components/builder-sidebar\";\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogTrigger,\n} from \"@uitripled/ui/components/ui/dialog\";\nimport { FolderOpen, Menu, X } from \"lucide-react\";\n\ntype BuilderHeaderProps = {\n  mobileSidebarOpen: boolean;\n  onMobileSidebarChange: (open: boolean) => void;\n  onLoadProjects: () => void;\n  onToggleTextEditing: () => void;\n  isTextEditing: boolean;\n  activeComponentCount: number;\n  onMobileComponentSelect: (animationId: string) => void;\n};\n\nexport function BuilderHeader({\n  mobileSidebarOpen,\n  onMobileSidebarChange,\n  onLoadProjects,\n  onToggleTextEditing,\n  isTextEditing,\n  activeComponentCount,\n  onMobileComponentSelect,\n}: BuilderHeaderProps) {\n  return (\n    <div className=\"border-b border-border bg-card px-4 py-3 sm:px-6\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"flex items-center gap-2\">\n          <h1 className=\"text-xl font-bold\">Page Builder</h1>\n          <Dialog open={mobileSidebarOpen} onOpenChange={onMobileSidebarChange}>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" size=\"sm\" className=\"gap-2 md:hidden\">\n                <Menu className=\"h-4 w-4\" />\n                Library\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"md:hidden inset-x-0 bottom-0 left-0 right-0 top-auto flex h-[calc(100vh-5rem)] max-w-none translate-x-0 translate-y-0 flex-col rounded-t-3xl border border-border bg-background p-0 pb-4 shadow-xl data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\">\n              <div className=\"flex items-center justify-between border-b border-border px-4 py-3\">\n                <div>\n                  <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">\n                    Component Library\n                  </p>\n                  <p className=\"text-sm font-semibold\">Blocks</p>\n                </div>\n                <DialogClose asChild>\n                  <Button variant=\"ghost\" size=\"icon\">\n                    <X className=\"h-4 w-4\" />\n                    <span className=\"sr-only\">Close</span>\n                  </Button>\n                </DialogClose>\n              </div>\n              <div className=\"flex-1 overflow-hidden\">\n                <BuilderSidebar\n                  allowDrag={false}\n                  className=\"flex h-full flex-col bg-background\"\n                  onSelectComponent={onMobileComponentSelect}\n                />\n              </div>\n            </DialogContent>\n          </Dialog>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\" onClick={onLoadProjects}>\n            <FolderOpen className=\"mr-2 h-4 w-4\" />\n            Load Project\n          </Button>\n          {/* <Button\n            variant={isTextEditing ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={onToggleTextEditing}\n            className=\"gap-2\"\n            disabled={activeComponentCount === 0}\n          >\n            <Type className=\"h-4 w-4\" />\n            {isTextEditing ? \"Done editing\" : \"Edit text\"}\n          </Button> */}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAMA;AAAA;AAAA;AAVA;;;;;;AAsBO,SAAS,cAAc,EAC5B,iBAAiB,EACjB,qBAAqB,EACrB,cAAc,EACd,mBAAmB,EACnB,aAAa,EACb,oBAAoB,EACpB,uBAAuB,EACJ;IACnB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAoB;;;;;;sCAClC,6LAAC,iKAAM;4BAAC,MAAM;4BAAmB,cAAc;;8CAC7C,6LAAC,wKAAa;oCAAC,OAAO;8CACpB,cAAA,6LAAC,iKAAM;wCAAC,SAAQ;wCAAU,MAAK;wCAAK,WAAU;;0DAC5C,6LAAC,6MAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;8CAIhC,6LAAC,wKAAa;oCAAC,WAAU;;sDACvB,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;;sEACC,6LAAC;4DAAE,WAAU;sEAAwD;;;;;;sEAGrE,6LAAC;4DAAE,WAAU;sEAAwB;;;;;;;;;;;;8DAEvC,6LAAC,sKAAW;oDAAC,OAAO;8DAClB,cAAA,6LAAC,iKAAM;wDAAC,SAAQ;wDAAQ,MAAK;;0EAC3B,6LAAC,oMAAC;gEAAC,WAAU;;;;;;0EACb,6LAAC;gEAAK,WAAU;0EAAU;;;;;;;;;;;;;;;;;;;;;;;sDAIhC,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,qKAAc;gDACb,WAAW;gDACX,WAAU;gDACV,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAM7B,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,iKAAM;wBAAC,SAAQ;wBAAU,MAAK;wBAAK,SAAS;;0CAC3C,6LAAC,mOAAU;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;;;;;AAiBnD;KAjEgB"}},
    {"offset": {"line": 2400, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder/drag-overlay.tsx"],"sourcesContent":["\"use client\";\n\nimport { DragOverlay as DndDragOverlay } from \"@dnd-kit/core\";\n\ntype DragOverlayProps = {\n  activeComponentInfo: { name: string; type: \"canvas\" | \"sidebar\" } | null;\n};\n\nexport function DragOverlay({ activeComponentInfo }: DragOverlayProps) {\n  return (\n    <DndDragOverlay>\n      {activeComponentInfo && (\n        <div className=\"rounded-lg border-2 border-primary bg-card p-4 shadow-lg opacity-90\">\n          <div className=\"text-sm font-medium\">{activeComponentInfo.name}</div>\n          {activeComponentInfo.type === \"canvas\" && (\n            <div className=\"mt-1 text-xs text-muted-foreground\">\n              Reordering...\n            </div>\n          )}\n        </div>\n      )}\n    </DndDragOverlay>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,SAAS,YAAY,EAAE,mBAAmB,EAAoB;IACnE,qBACE,6LAAC,6KAAc;kBACZ,qCACC,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BAAuB,oBAAoB,IAAI;;;;;;gBAC7D,oBAAoB,IAAI,KAAK,0BAC5B,6LAAC;oBAAI,WAAU;8BAAqC;;;;;;;;;;;;;;;;;AAQhE;KAfgB"}},
    {"offset": {"line": 2452, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder/instructions-banner.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport { Card } from \"@uitripled/ui/components/ui/card\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Info } from \"lucide-react\";\n\ntype InstructionsBannerProps = {\n  show: boolean;\n  onHide: () => void;\n};\n\nexport function InstructionsBanner({ show, onHide }: InstructionsBannerProps) {\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: \"auto\" }}\n          exit={{ opacity: 0, height: 0 }}\n          className=\"border-b border-border bg-muted/30\"\n        >\n          <Card className=\"m-4 border-2 border-primary/20 bg-primary/5 p-4\">\n            <div className=\"flex items-start gap-3\">\n              <Info className=\"mt-0.5 h-5 w-5 flex-shrink-0 text-primary\" />\n              <div className=\"flex-1 space-y-2 text-sm\">\n                <h3 className=\"font-semibold text-foreground\">\n                  Important Notes\n                </h3>\n                <ul className=\"space-y-1.5 text-muted-foreground\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>\n                      The builder is just for previewing, not a final production\n                      setup\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>\n                      The builder is currently in beta and may have some bugs\n                      and limitations\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>The builder doesn&apos;t support auto-grid yet</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"mt-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-primary\" />\n                    <span>Only blocks are allowed for use</span>\n                  </li>\n                </ul>\n                <div className=\"flex justify-end\">\n                  <Button\n                    variant=\"default\"\n                    className=\"flex justify-start\"\n                    size=\"sm\"\n                    onClick={onHide}\n                  >\n                    Hide\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </Card>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAYO,SAAS,mBAAmB,EAAE,IAAI,EAAE,MAAM,EAA2B;IAC1E,qBACE,6LAAC,+MAAe;kBACb,sBACC,6LAAC,uMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,QAAQ;YAAE;YACjC,SAAS;gBAAE,SAAS;gBAAG,QAAQ;YAAO;YACtC,MAAM;gBAAE,SAAS;gBAAG,QAAQ;YAAE;YAC9B,WAAU;sBAEV,cAAA,6LAAC,6JAAI;gBAAC,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,6MAAI;4BAAC,WAAU;;;;;;sCAChB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAG9C,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;4CAAG,WAAU;;8DACZ,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;sDAKR,6LAAC;4CAAG,WAAU;;8DACZ,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;sDAKR,6LAAC;4CAAG,WAAU;;8DACZ,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;sDAER,6LAAC;4CAAG,WAAU;;8DACZ,6LAAC;oDAAK,WAAU;;;;;;8DAChB,6LAAC;8DAAK;;;;;;;;;;;;;;;;;;8CAGV,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,iKAAM;wCACL,SAAQ;wCACR,WAAU;wCACV,MAAK;wCACL,SAAS;kDACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB;KA1DgB"}},
    {"offset": {"line": 2664, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/lib/builder-utils.ts"],"sourcesContent":["import type {\n  BuilderProjectPage,\n  SavedProject,\n  SavedProjectPage,\n} from \"@uitripled/shared/builder\";\n\nexport const sanitizeSlug = (value: string) =>\n  value\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\")\n    .slice(0, 48);\n\nexport function generateUniqueSlug(\n  baseName: string,\n  existingSlugs: string[]\n): string {\n  const baseSlug = sanitizeSlug(baseName) || \"page\";\n  if (!existingSlugs.includes(baseSlug)) {\n    return baseSlug;\n  }\n\n  let attempt = 2;\n  let candidate = `${baseSlug}-${attempt}`;\n  while (existingSlugs.includes(candidate)) {\n    attempt += 1;\n    candidate = `${baseSlug}-${attempt}`;\n  }\n\n  return candidate;\n}\n\nexport function createPage(\n  name: string,\n  existingSlugs: string[]\n): BuilderProjectPage {\n  const id =\n    typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\"\n      ? crypto.randomUUID()\n      : `page-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n\n  const slug = generateUniqueSlug(name, existingSlugs);\n\n  return {\n    id,\n    name,\n    slug,\n    components: [],\n  };\n}\n\nexport function extractSavedPages(project: SavedProject): SavedProjectPage[] {\n  if (project.pages && project.pages.length > 0) {\n    return project.pages;\n  }\n\n  return [\n    {\n      id:\n        project.entryPageId ||\n        `page-${sanitizeSlug(project.name || \"landing\") || \"landing\"}`,\n      name: \"Landing\",\n      slug: \"landing\",\n      components: project.components ?? [],\n      code: project.code,\n    },\n  ];\n}\n\nexport function countSavedProjectComponents(project: SavedProject): number {\n  return extractSavedPages(project).reduce(\n    (total, page) => total + (page.components?.length ?? 0),\n    0\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAMO,MAAM,eAAe,CAAC,QAC3B,MACG,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY,IACpB,KAAK,CAAC,GAAG;AAEP,SAAS,mBACd,QAAgB,EAChB,aAAuB;IAEvB,MAAM,WAAW,aAAa,aAAa;IAC3C,IAAI,CAAC,cAAc,QAAQ,CAAC,WAAW;QACrC,OAAO;IACT;IAEA,IAAI,UAAU;IACd,IAAI,YAAY,GAAG,SAAS,CAAC,EAAE,SAAS;IACxC,MAAO,cAAc,QAAQ,CAAC,WAAY;QACxC,WAAW;QACX,YAAY,GAAG,SAAS,CAAC,EAAE,SAAS;IACtC;IAEA,OAAO;AACT;AAEO,SAAS,WACd,IAAY,EACZ,aAAuB;IAEvB,MAAM,KACJ,OAAO,WAAW,eAAe,OAAO,OAAO,UAAU,KAAK,aAC1D,OAAO,UAAU,KACjB,CAAC,KAAK,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK;IAErE,MAAM,OAAO,mBAAmB,MAAM;IAEtC,OAAO;QACL;QACA;QACA;QACA,YAAY,EAAE;IAChB;AACF;AAEO,SAAS,kBAAkB,OAAqB;IACrD,IAAI,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,GAAG,GAAG;QAC7C,OAAO,QAAQ,KAAK;IACtB;IAEA,OAAO;QACL;YACE,IACE,QAAQ,WAAW,IACnB,CAAC,KAAK,EAAE,aAAa,QAAQ,IAAI,IAAI,cAAc,WAAW;YAChE,MAAM;YACN,MAAM;YACN,YAAY,QAAQ,UAAU,IAAI,EAAE;YACpC,MAAM,QAAQ,IAAI;QACpB;KACD;AACH;AAEO,SAAS,4BAA4B,OAAqB;IAC/D,OAAO,kBAAkB,SAAS,MAAM,CACtC,CAAC,OAAO,OAAS,QAAQ,CAAC,KAAK,UAAU,EAAE,UAAU,CAAC,GACtD;AAEJ"}},
    {"offset": {"line": 2724, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder/load-project-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport { Card } from \"@uitripled/ui/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@uitripled/ui/components/ui/dialog\";\nimport { extractSavedPages } from \"@/lib/builder-utils\";\nimport type { SavedProject } from \"@uitripled/shared/builder\";\nimport { Eye, Trash2 } from \"lucide-react\";\n\ntype LoadProjectDialogProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  savedProjects: SavedProject[];\n  onLoadProject: (project: SavedProject) => void;\n  onDeleteProject: (projectName: string) => void;\n  onPreviewProject: (projectName: string) => void;\n};\n\nexport function LoadProjectDialog({\n  open,\n  onOpenChange,\n  savedProjects,\n  onLoadProject,\n  onDeleteProject,\n  onPreviewProject,\n}: LoadProjectDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Load Project</DialogTitle>\n          <DialogDescription>\n            Select a saved project to load into the builder\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"max-h-[400px] overflow-y-auto\">\n          {savedProjects.length === 0 ? (\n            <div className=\"py-8 text-center text-sm text-muted-foreground\">\n              No saved projects found. Create and save a project first.\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {savedProjects.map((project) => {\n                const pagesForProject = extractSavedPages(project);\n                const totalComponents = pagesForProject.reduce(\n                  (total, page) => total + (page.components?.length ?? 0),\n                  0\n                );\n                const savedDate = new Date(project.savedAt);\n\n                return (\n                  <Card\n                    key={project.name}\n                    className=\"p-4 transition-colors hover:bg-accent/50\"\n                  >\n                    <div className=\"flex items-start justify-between gap-4\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold\">{project.name}</h3>\n                        <p className=\"mt-1 text-sm text-muted-foreground\">\n                          {pagesForProject.length}{\" \"}\n                          {pagesForProject.length === 1 ? \"page\" : \"pages\"}\n                          {\"  \"}\n                          {totalComponents}{\" \"}\n                          {totalComponents === 1 ? \"component\" : \"components\"}\n                          {\"  \"}\n                          Saved {savedDate.toLocaleDateString()} at{\" \"}\n                          {savedDate.toLocaleTimeString()}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => onPreviewProject(project.name)}\n                        >\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            if (confirm(`Delete project \"${project.name}\"?`)) {\n                              onDeleteProject(project.name);\n                            }\n                          }}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                        <Button\n                          variant=\"default\"\n                          size=\"sm\"\n                          onClick={() => onLoadProject(project)}\n                        >\n                          Load\n                        </Button>\n                      </div>\n                    </div>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n        </div>\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAQA;AAEA;AAAA;AAdA;;;;;;;AAyBO,SAAS,kBAAkB,EAChC,IAAI,EACJ,YAAY,EACZ,aAAa,EACb,aAAa,EACb,eAAe,EACf,gBAAgB,EACO;IACvB,qBACE,6LAAC,iKAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6LAAC,wKAAa;YAAC,WAAU;;8BACvB,6LAAC,uKAAY;;sCACX,6LAAC,sKAAW;sCAAC;;;;;;sCACb,6LAAC,4KAAiB;sCAAC;;;;;;;;;;;;8BAIrB,6LAAC;oBAAI,WAAU;8BACZ,cAAc,MAAM,KAAK,kBACxB,6LAAC;wBAAI,WAAU;kCAAiD;;;;;6CAIhE,6LAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAC;4BAClB,MAAM,kBAAkB,IAAA,8JAAiB,EAAC;4BAC1C,MAAM,kBAAkB,gBAAgB,MAAM,CAC5C,CAAC,OAAO,OAAS,QAAQ,CAAC,KAAK,UAAU,EAAE,UAAU,CAAC,GACtD;4BAEF,MAAM,YAAY,IAAI,KAAK,QAAQ,OAAO;4BAE1C,qBACE,6LAAC,6JAAI;gCAEH,WAAU;0CAEV,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAG,WAAU;8DAAiB,QAAQ,IAAI;;;;;;8DAC3C,6LAAC;oDAAE,WAAU;;wDACV,gBAAgB,MAAM;wDAAE;wDACxB,gBAAgB,MAAM,KAAK,IAAI,SAAS;wDACxC;wDACA;wDAAiB;wDACjB,oBAAoB,IAAI,cAAc;wDACtC;wDAAM;wDACA,UAAU,kBAAkB;wDAAG;wDAAI;wDACzC,UAAU,kBAAkB;;;;;;;;;;;;;sDAGjC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,iKAAM;oDACL,SAAQ;oDACR,MAAK;oDACL,SAAS,IAAM,iBAAiB,QAAQ,IAAI;8DAE5C,cAAA,6LAAC,0MAAG;wDAAC,WAAU;;;;;;;;;;;8DAEjB,6LAAC,iKAAM;oDACL,SAAQ;oDACR,MAAK;oDACL,SAAS;wDACP,IAAI,QAAQ,CAAC,gBAAgB,EAAE,QAAQ,IAAI,CAAC,EAAE,CAAC,GAAG;4DAChD,gBAAgB,QAAQ,IAAI;wDAC9B;oDACF;8DAEA,cAAA,6LAAC,uNAAM;wDAAC,WAAU;;;;;;;;;;;8DAEpB,6LAAC,iKAAM;oDACL,SAAQ;oDACR,MAAK;oDACL,SAAS,IAAM,cAAc;8DAC9B;;;;;;;;;;;;;;;;;;+BAxCA,QAAQ,IAAI;;;;;wBA+CvB;;;;;;;;;;;8BAIN,6LAAC,uKAAY;8BACX,cAAA,6LAAC,iKAAM;wBAAC,SAAQ;wBAAU,SAAS,IAAM,aAAa;kCAAQ;;;;;;;;;;;;;;;;;;;;;;AAOxE;KA7FgB"}},
    {"offset": {"line": 2944, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder/page-tabs.tsx"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"@uitripled/ui/components/ui/button\";\nimport type { BuilderProjectPage } from \"@uitripled/shared/builder\";\nimport { Edit3, Plus, Trash2 } from \"lucide-react\";\n\ntype PageTabsProps = {\n  pages: BuilderProjectPage[];\n  activePage: BuilderProjectPage | null;\n  onSelectPage: (pageId: string) => void;\n  onAddPage: () => void;\n  onRenamePage: (pageId: string) => void;\n  onDeletePage: (pageId: string) => void;\n  activeRoute: string;\n};\n\nexport function PageTabs({\n  pages,\n  activePage,\n  onSelectPage,\n  onAddPage,\n  onRenamePage,\n  onDeletePage,\n  activeRoute,\n}: PageTabsProps) {\n  return (\n    <div className=\"px-4 pb-4 md:px-6\">\n      <div className=\"flex flex-wrap items-center gap-2\">\n        {pages.map((page, index) => (\n          <div\n            key={page.id}\n            className=\"flex items-center gap-1 rounded-lg border border-border bg-card/60 p-1\"\n          >\n            <Button\n              size=\"sm\"\n              variant={page.id === activePage?.id ? \"default\" : \"ghost\"}\n              className=\"gap-2\"\n              onClick={() => onSelectPage(page.id)}\n            >\n              {page.name}\n              {index === 0 && (\n                <span className=\"rounded-full bg-primary/15 px-2 py-0.5 text-[10px] font-semibold uppercase text-primary\">\n                  Home\n                </span>\n              )}\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-8 w-8 text-muted-foreground\"\n              onClick={() => onRenamePage(page.id)}\n              aria-label={`Rename ${page.name}`}\n            >\n              <Edit3 className=\"h-4 w-4\" />\n            </Button>\n            {pages.length > 1 && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-8 w-8 text-destructive\"\n                onClick={() => onDeletePage(page.id)}\n                aria-label={`Delete ${page.name}`}\n              >\n                <Trash2 className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n        ))}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"gap-1\"\n          onClick={onAddPage}\n        >\n          <Plus className=\"h-4 w-4\" />\n          Add page\n        </Button>\n      </div>\n      {activePage && (\n        <p className=\"mt-2 text-xs text-muted-foreground\">\n          Route:{\" \"}\n          <span className=\"font-mono text-foreground\">{activeRoute}</span>\n        </p>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;AAJA;;;;AAgBO,SAAS,SAAS,EACvB,KAAK,EACL,UAAU,EACV,YAAY,EACZ,SAAS,EACT,YAAY,EACZ,YAAY,EACZ,WAAW,EACG;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,6LAAC;4BAEC,WAAU;;8CAEV,6LAAC,iKAAM;oCACL,MAAK;oCACL,SAAS,KAAK,EAAE,KAAK,YAAY,KAAK,YAAY;oCAClD,WAAU;oCACV,SAAS,IAAM,aAAa,KAAK,EAAE;;wCAElC,KAAK,IAAI;wCACT,UAAU,mBACT,6LAAC;4CAAK,WAAU;sDAA0F;;;;;;;;;;;;8CAK9G,6LAAC,iKAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,aAAa,KAAK,EAAE;oCACnC,cAAY,CAAC,OAAO,EAAE,KAAK,IAAI,EAAE;8CAEjC,cAAA,6LAAC,sNAAK;wCAAC,WAAU;;;;;;;;;;;gCAElB,MAAM,MAAM,GAAG,mBACd,6LAAC,iKAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,aAAa,KAAK,EAAE;oCACnC,cAAY,CAAC,OAAO,EAAE,KAAK,IAAI,EAAE;8CAEjC,cAAA,6LAAC,uNAAM;wCAAC,WAAU;;;;;;;;;;;;2BAjCjB,KAAK,EAAE;;;;;kCAsChB,6LAAC,iKAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAU;wBACV,SAAS;;0CAET,6LAAC,6MAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;YAI/B,4BACC,6LAAC;gBAAE,WAAU;;oBAAqC;oBACzC;kCACP,6LAAC;wBAAK,WAAU;kCAA6B;;;;;;;;;;;;;;;;;;AAKvD;KAtEgB"}},
    {"offset": {"line": 3092, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/components/builder/text-editing-banner.tsx"],"sourcesContent":["\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\n\ntype TextEditingBannerProps = {\n  show: boolean;\n};\n\nexport function TextEditingBanner({ show }: TextEditingBannerProps) {\n  return (\n    <AnimatePresence>\n      {show && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -10 }}\n          className=\"mx-4 mb-4 rounded-md border border-primary/30 bg-primary/10 p-3 text-sm text-primary\"\n        >\n          Text editing mode enabled. Click highlighted text to edit. Dragging is\n          disabled while this mode is active.\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAQO,SAAS,kBAAkB,EAAE,IAAI,EAA0B;IAChE,qBACE,6LAAC,+MAAe;kBACb,sBACC,6LAAC,uMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC9B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,MAAM;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC3B,WAAU;sBACX;;;;;;;;;;;AAOT;KAhBgB"}},
    {"offset": {"line": 3140, "column": 0}, "map": {"version":3,"sources":["file:///Users/moumensoliman/code/uitripled/apps/web/app/builder/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { BuilderCanvas } from \"@/components/builder-canvas\";\nimport { BuilderCodeView } from \"@/components/builder-code-view\";\nimport { BuilderSidebar } from \"@/components/builder-sidebar\";\nimport { BuilderHeader } from \"@/components/builder/builder-header\";\nimport { DragOverlay } from \"@/components/builder/drag-overlay\";\nimport { InstructionsBanner } from \"@/components/builder/instructions-banner\";\nimport { LoadProjectDialog } from \"@/components/builder/load-project-dialog\";\nimport { PageTabs } from \"@/components/builder/page-tabs\";\nimport { TextEditingBanner } from \"@/components/builder/text-editing-banner\";\nimport {\n  createPage,\n  extractSavedPages,\n  generateUniqueSlug,\n} from \"@/lib/builder-utils\";\nimport { componentsRegistry } from \"@/lib/components-registry\";\nimport type {\n  BuilderComponent,\n  BuilderProjectPage,\n  SavedProject,\n} from \"@uitripled/shared/builder\";\nimport {\n  DndContext,\n  DragEndEvent,\n  DragStartEvent,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { arrayMove } from \"@dnd-kit/sortable\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\n\nexport default function BuilderPage() {\n  const [pages, setPages] = useState<BuilderProjectPage[]>(() => {\n    const initial = createPage(\"Landing\", []);\n    return [initial];\n  });\n  const [activePageId, setActivePageId] = useState<string>(\"\");\n  const [activeId, setActiveId] = useState<string | null>(null);\n  const [showInstructions, setShowInstructions] = useState(true);\n  const [loadDialogOpen, setLoadDialogOpen] = useState(false);\n  const [mobileSidebarOpen, setMobileSidebarOpen] = useState(false);\n  const [savedProjects, setSavedProjects] = useState<SavedProject[]>([]);\n  const [isTextEditing, setIsTextEditing] = useState(false);\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8,\n      },\n    })\n  );\n\n  useEffect(() => {\n    if (pages.length === 0) {\n      if (activePageId) {\n        setActivePageId(\"\");\n      }\n      return;\n    }\n\n    const pageExists = pages.some((page) => page.id === activePageId);\n    if (!pageExists) {\n      setActivePageId(pages[0].id);\n    }\n  }, [pages, activePageId]);\n\n  const activePage = useMemo(() => {\n    if (!activePageId) {\n      return pages[0] ?? null;\n    }\n\n    const current = pages.find((page) => page.id === activePageId);\n    return current ?? pages[0] ?? null;\n  }, [pages, activePageId]);\n\n  const activeComponentCount = activePage?.components.length ?? 0;\n  const activePageIndex = activePage\n    ? pages.findIndex((page) => page.id === activePage.id)\n    : -1;\n  const activeRoute =\n    activePageIndex === 0 ? \"/\" : activePage ? `/${activePage.slug}` : \"/\";\n\n  useEffect(() => {\n    if (activeComponentCount === 0 && isTextEditing) {\n      setIsTextEditing(false);\n    }\n  }, [activeComponentCount, isTextEditing]);\n\n  const handleRegisterTextNode = useCallback(\n    (componentId: string, nodeId: string, originalText: string) => {\n      if (!activePageId) return;\n\n      setPages((prev) =>\n        prev.map((page) => {\n          if (page.id !== activePageId) return page;\n\n          return {\n            ...page,\n            components: page.components.map((component) => {\n              if (component.id !== componentId) return component;\n\n              const existing = component.textContent?.[nodeId];\n              if (existing) {\n                if (\n                  existing.value === existing.original &&\n                  existing.original !== originalText\n                ) {\n                  return {\n                    ...component,\n                    textContent: {\n                      ...(component.textContent ?? {}),\n                      [nodeId]: { original: originalText, value: originalText },\n                    },\n                  };\n                }\n                return component;\n              }\n\n              return {\n                ...component,\n                textContent: {\n                  ...(component.textContent ?? {}),\n                  [nodeId]: { original: originalText, value: originalText },\n                },\n              };\n            }),\n          };\n        })\n      );\n    },\n    [activePageId]\n  );\n\n  const handleUpdateTextNode = useCallback(\n    (componentId: string, nodeId: string, newValue: string) => {\n      if (!activePageId) return;\n\n      setPages((prev) =>\n        prev.map((page) => {\n          if (page.id !== activePageId) return page;\n\n          return {\n            ...page,\n            components: page.components.map((component) => {\n              if (component.id !== componentId) return component;\n\n              const existing = component.textContent?.[nodeId];\n              if (existing && existing.value === newValue) {\n                return component;\n              }\n\n              return {\n                ...component,\n                textContent: {\n                  ...(component.textContent ?? {}),\n                  [nodeId]: {\n                    original: existing?.original ?? newValue,\n                    value: newValue,\n                  },\n                },\n              };\n            }),\n          };\n        })\n      );\n    },\n    [activePageId]\n  );\n\n  const handleAddComponentToPage = useCallback(\n    (animationId: string) => {\n      const animation = componentsRegistry.find(\n        (item) => item.id === animationId\n      );\n      if (\n        !animation ||\n        (animation.category !== \"blocks\" && animation.category !== \"resumes\")\n      ) {\n        return;\n      }\n\n      const newComponent: BuilderComponent = {\n        id: `component-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n        animationId: animation.id,\n        animation,\n        textContent: {},\n      };\n\n      setPages((prev) => {\n        const targetPageId =\n          activePageId && prev.some((page) => page.id === activePageId)\n            ? activePageId\n            : prev[0]?.id;\n\n        if (!targetPageId) {\n          return prev;\n        }\n\n        return prev.map((page) =>\n          page.id === targetPageId\n            ? { ...page, components: [...page.components, newComponent] }\n            : page\n        );\n      });\n    },\n    [activePageId]\n  );\n\n  const handleMobileComponentSelect = useCallback(\n    (animationId: string) => {\n      handleAddComponentToPage(animationId);\n      setMobileSidebarOpen(false);\n    },\n    [handleAddComponentToPage]\n  );\n\n  const handleDragStart = (event: DragStartEvent) => {\n    if (isTextEditing) return;\n    setActiveId(event.active.id as string);\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    if (isTextEditing) {\n      setActiveId(null);\n      return;\n    }\n    const currentPage = activePage;\n    if (!currentPage) {\n      setActiveId(null);\n      return;\n    }\n    const { active, over } = event;\n\n    if (!over) {\n      setActiveId(null);\n      return;\n    }\n\n    const activeId = active.id as string;\n    const overId = over.id as string;\n\n    // Check if we're reordering components within the canvas\n    const activeIndex = currentPage.components.findIndex(\n      (c) => c.id === activeId\n    );\n    const overIndex = currentPage.components.findIndex((c) => c.id === overId);\n\n    if (activeIndex !== -1 && overIndex !== -1 && activeIndex !== overIndex) {\n      // Reordering existing components\n      setPages((prev) =>\n        prev.map((page) =>\n          page.id === currentPage.id\n            ? {\n                ...page,\n                components: arrayMove(page.components, activeIndex, overIndex),\n              }\n            : page\n        )\n      );\n      setActiveId(null);\n      return;\n    }\n\n    // Check if dragging from sidebar to canvas\n    const animation = componentsRegistry.find((a) => a.id === activeId);\n\n    // Only allow blocks category components\n    if (\n      animation &&\n      animation.category !== \"blocks\" &&\n      animation.category !== \"resumes\"\n    ) {\n      setActiveId(null);\n      return;\n    }\n\n    if (animation && (overId === \"builder-canvas\" || overIndex !== -1)) {\n      // Add new component to canvas\n      const newComponent: BuilderComponent = {\n        id: `component-${Date.now()}-${Math.random()}`,\n        animationId: animation.id,\n        animation,\n        textContent: {},\n      };\n\n      // If dropped over a component, insert at that position\n      if (overIndex !== -1) {\n        setPages((prev) =>\n          prev.map((page) => {\n            if (page.id !== currentPage.id) return page;\n            const newItems = [...page.components];\n            newItems.splice(overIndex, 0, newComponent);\n            return {\n              ...page,\n              components: newItems,\n            };\n          })\n        );\n      } else {\n        // If dropped on canvas, append to end\n        setPages((prev) =>\n          prev.map((page) =>\n            page.id === currentPage.id\n              ? { ...page, components: [...page.components, newComponent] }\n              : page\n          )\n        );\n      }\n    }\n\n    setActiveId(null);\n  };\n\n  const handleDeleteComponent = (id: string) => {\n    if (!activePage) return;\n\n    setPages((prev) =>\n      prev.map((page) =>\n        page.id === activePage.id\n          ? {\n              ...page,\n              components: page.components.filter(\n                (component) => component.id !== id\n              ),\n            }\n          : page\n      )\n    );\n  };\n\n  const handleSelectPage = (pageId: string) => {\n    setActivePageId(pageId);\n    setIsTextEditing(false);\n    setActiveId(null);\n  };\n\n  const handleAddPage = () => {\n    const defaultName = `Page ${pages.length + 1}`;\n    const input = window.prompt(\"Enter a name for the new page\", defaultName);\n    const normalized = input?.trim();\n    if (!normalized) {\n      return;\n    }\n\n    const existingSlugs = pages.map((page) => page.slug);\n    const newPage = createPage(normalized, existingSlugs);\n    setPages((prev) => [...prev, newPage]);\n    setActivePageId(newPage.id);\n    setIsTextEditing(false);\n    setActiveId(null);\n  };\n\n  const handleRenamePage = (pageId: string) => {\n    const page = pages.find((item) => item.id === pageId);\n    if (!page) return;\n\n    const input = window.prompt(\"Rename page\", page.name);\n    const normalized = input?.trim();\n    if (!normalized || normalized === page.name) {\n      return;\n    }\n\n    const existingSlugs = pages\n      .filter((p) => p.id !== pageId)\n      .map((p) => p.slug);\n    const newSlug = generateUniqueSlug(normalized, existingSlugs);\n\n    setPages((prev) =>\n      prev.map((item) =>\n        item.id === pageId\n          ? {\n              ...item,\n              name: normalized,\n              slug: newSlug,\n            }\n          : item\n      )\n    );\n  };\n\n  const handleDeletePage = (pageId: string) => {\n    if (pages.length <= 1) {\n      window.alert(\"You need at least one page in the project.\");\n      return;\n    }\n\n    const page = pages.find((item) => item.id === pageId);\n    if (!page) return;\n\n    const confirmed = window.confirm(`Delete page \"${page.name}\"?`);\n    if (!confirmed) return;\n\n    const remainingPages = pages.filter((item) => item.id !== pageId);\n    setPages(remainingPages);\n    setIsTextEditing(false);\n    setActiveId(null);\n\n    if (activePageId === pageId) {\n      setActivePageId(remainingPages[0]?.id ?? \"\");\n    }\n  };\n\n  const loadSavedProjects = () => {\n    const projects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    const projectList = Object.values(projects) as SavedProject[];\n    setSavedProjects(\n      projectList.sort(\n        (a, b) => new Date(b.savedAt).getTime() - new Date(a.savedAt).getTime()\n      )\n    );\n    setLoadDialogOpen(true);\n  };\n\n  const loadProject = (project: SavedProject) => {\n    const rawPages = extractSavedPages(project);\n    const slugsInUse: string[] = [];\n\n    const derivedPages = rawPages.map<BuilderProjectPage>((page, index) => {\n      const safeName = page.name?.trim() || `Page ${index + 1}`;\n      const slugBase = page.slug?.trim() || safeName;\n      const slug = generateUniqueSlug(slugBase, slugsInUse);\n      slugsInUse.push(slug);\n\n      const pageId =\n        page.id && page.id.length > 0\n          ? page.id\n          : typeof crypto !== \"undefined\" &&\n              typeof crypto.randomUUID === \"function\"\n            ? crypto.randomUUID()\n            : `page-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n\n      const builderComponents = (page.components ?? [])\n        .map<BuilderComponent | null>((comp) => {\n          const animation = componentsRegistry.find(\n            (a) => a.id === comp.animationId\n          );\n          if (!animation) {\n            return null;\n          }\n\n          return {\n            id:\n              comp.id && comp.id.length > 0\n                ? comp.id\n                : `component-${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n            animationId: comp.animationId,\n            animation,\n            textContent: comp.textContent ?? {},\n          };\n        })\n        .filter((value): value is BuilderComponent => Boolean(value));\n\n      return {\n        id: pageId,\n        name: safeName,\n        slug,\n        components: builderComponents,\n      };\n    });\n\n    const finalPages =\n      derivedPages.length > 0 ? derivedPages : [createPage(\"Landing\", [])];\n\n    setPages(finalPages);\n    setLoadDialogOpen(false);\n    setIsTextEditing(false);\n    setActiveId(null);\n\n    const desiredActiveId =\n      project.entryPageId &&\n      finalPages.some((page) => page.id === project.entryPageId)\n        ? project.entryPageId\n        : finalPages[0].id;\n\n    setActivePageId(desiredActiveId);\n  };\n\n  const deleteProject = (projectName: string) => {\n    const projects = JSON.parse(\n      localStorage.getItem(\"builderProjects\") || \"{}\"\n    );\n    delete projects[projectName];\n    localStorage.setItem(\"builderProjects\", JSON.stringify(projects));\n    loadSavedProjects(); // Refresh the list\n  };\n\n  const previewProject = (projectName: string) => {\n    window.open(`/preview/${encodeURIComponent(projectName)}`, \"_blank\");\n  };\n\n  // Get active component info for drag overlay\n  const getActiveComponentInfo = () => {\n    if (!activeId) return null;\n\n    for (const page of pages) {\n      const canvasComponent = page.components.find(\n        (component) => component.id === activeId\n      );\n      if (canvasComponent) {\n        return {\n          name: canvasComponent.animation.name,\n          type: \"canvas\" as const,\n        };\n      }\n    }\n\n    const animation = componentsRegistry.find((a) => a.id === activeId);\n    if (animation) {\n      return { name: animation.name, type: \"sidebar\" as const };\n    }\n\n    return null;\n  };\n\n  const activeComponentInfo = getActiveComponentInfo();\n\n  return (\n    <div className=\"flex h-screen flex-col bg-background\">\n      <BuilderHeader\n        mobileSidebarOpen={mobileSidebarOpen}\n        onMobileSidebarChange={setMobileSidebarOpen}\n        onLoadProjects={loadSavedProjects}\n        onToggleTextEditing={() => setIsTextEditing((prev) => !prev)}\n        isTextEditing={isTextEditing}\n        activeComponentCount={activeComponentCount}\n        onMobileComponentSelect={handleMobileComponentSelect}\n      />\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        <DndContext\n          sensors={sensors}\n          onDragStart={handleDragStart}\n          onDragEnd={handleDragEnd}\n        >\n          {/* Left Sidebar */}\n          <BuilderSidebar\n            className=\"hidden h-full w-80 border-r border-border md:flex\"\n            onSelectComponent={handleAddComponentToPage}\n          />\n\n          {/* Main Canvas Area */}\n          <div className=\"flex flex-1 flex-col overflow-y-auto md:overflow-hidden\">\n            <InstructionsBanner\n              show={showInstructions}\n              onHide={() => setShowInstructions(false)}\n            />\n\n            <TextEditingBanner show={isTextEditing} />\n\n            <PageTabs\n              pages={pages}\n              activePage={activePage}\n              onSelectPage={handleSelectPage}\n              onAddPage={handleAddPage}\n              onRenamePage={handleRenamePage}\n              onDeletePage={handleDeletePage}\n              activeRoute={activeRoute}\n            />\n\n            <div className=\"md:flex-1 md:overflow-y-auto p-4 md:p-6\">\n              <BuilderCanvas\n                components={activePage?.components ?? []}\n                onDelete={handleDeleteComponent}\n                isTextEditing={isTextEditing}\n                onRegisterTextNode={handleRegisterTextNode}\n                onUpdateTextNode={handleUpdateTextNode}\n              />\n            </div>\n\n            {/* Code View */}\n            <BuilderCodeView\n              pages={pages}\n              activePageId={activePage?.id ?? null}\n            />\n          </div>\n\n          <DragOverlay activeComponentInfo={activeComponentInfo} />\n        </DndContext>\n      </div>\n\n      <LoadProjectDialog\n        open={loadDialogOpen}\n        onOpenChange={setLoadDialogOpen}\n        savedProjects={savedProjects}\n        onLoadProject={loadProject}\n        onDeleteProject={deleteProject}\n        onPreviewProject={previewProject}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}